
            <!DOCTYPE html>
            <html lang="zh-CN">
                <head>
                    <meta charset="UTF-8">
                    <title>
 基于Socket的文件传输（使用CSocket类） - CSDN博客
</title>

                <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/detail-60a2c245da.min.css">
                <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/themes/skin3-template/skin3-template-88717cedf2.min.css">

                <script type="text/javascript">
                var username = "";
                </script>

                <script src="https://csdnimg.cn/public/common/libs/jquery/jquery-1.9.1.min.js" type="text/javascript"></script>

                <!-- 新版上报 -->
                <!-- 新版上报end -->
                <link rel="stylesheet" href="https://csdnimg.cn/public/sandalstrap/1.3/css/sandalstrap.min.css"> 
                </head>
                <body>    
        
                    <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/blog_code-c3a0c33d5c.css">
                    <div class="container clearfix pt0" id="mainBox">
        <main style="width: 100%;"><div class="blog-content-box">
 <div class="article-title-box" id="article_anchors_460">
  <span class="article-type type-1 float-left">
   原
  </span>
  <h1 class="title-article">
   基于Socket的文件传输（使用CSocket类）
  </h1>
 </div>
 <div class="article-info-box">
  <div class="article-bar-top d-flex">
   <span class="time">
    2013年09月25日 18:38:33
   </span>
   <div ">
    <span class="read-count">
     阅读数：15098
    </span>
   </div>
  </div>
 </div>
 <article>
  <div class="article_content clearfix csdn-tracking-statistics" data-dsm="post" data-mod="popu_307" data-pid="blog" id="article_content">
   <link href="https://csdnimg.cn/release/phoenix/template/css/htmledit_views-0a60691e80.css" rel="stylesheet"/>
   <div class="htmledit_views">
    <p>
     <span style="font-family:'宋体';font-size:14px;">
     </span>
     <span style="font-size:14px;">
      <span style="font-family:'宋体';">
       本软件使用
      </span>
      <span lang="en-us" xml:lang="en-us">
       <span style="font-family:Calibri;">
        MFC
       </span>
      </span>
      <span style="font-family:'宋体';">
       采用面向对象的方法实现了基于
      </span>
      <span lang="en-us" xml:lang="en-us">
       <span style="font-family:Calibri;">
        Socket
       </span>
      </span>
      <span style="font-family:'宋体';">
       的文件传输。这是原来研究生课程的结课作业，实现了Socket的发送和接收，以及读取ini配置文件等操作。使用了CSocket类
      </span>
     </span>
     <span style="font-family:'宋体';font-size:14px;">
     </span>
    </p>
    <p>
     <span style="font-size:14px;">
      <span style="font-family:'宋体';">
       以下是当时
       <span style="font-family:'宋体';font-size:14px;">
        结课
       </span>
       作业
      </span>
      <span lang="en-us" xml:lang="en-us">
       <span style="font-family:Calibri;">
        的正文：
       </span>
      </span>
      <span style="font-family:'宋体';">
      </span>
     </span>
    </p>
    <p align="center" class="MsoNormal" style="margin:0cm 0cm 0pt;text-align:center;">
     <span lang="en-us" xml:lang="en-us">
      <span style="font-family:Calibri;font-size:14px;">
      </span>
     </span>
    </p>
    <span style="font-family:'宋体';font-size:14px;">
    </span>
    <p class="MsoListParagraph" style="margin:0cm 0cm 0pt 21pt;text-indent:-21pt;">
     <span style="font-size:14px;">
      <span lang="en-us" xml:lang="en-us">
       <span>
        <span style="font-family:Calibri;">
         一．
        </span>
       </span>
      </span>
      <span style="font-family:'宋体';">
       软件特点如下：
      </span>
      <span lang="en-us" xml:lang="en-us">
      </span>
     </span>
    </p>
    <span style="font-family:'宋体';font-size:14px;">
    </span>
    <p class="MsoNormal" style="margin:0cm 0cm 0pt;">
     <span lang="en-us" xml:lang="en-us">
      <span style="font-family:Calibri;font-size:14px;">
      </span>
     </span>
    </p>
    <span style="font-family:'宋体';font-size:14px;">
    </span>
    <p class="MsoNormal" style="margin:0cm 0cm 0pt;">
     <span lang="en-us" xml:lang="en-us">
      <span style="font-family:Calibri;font-size:14px;">
      </span>
     </span>
    </p>
    <span style="font-family:'宋体';font-size:14px;">
    </span>
    <p class="MsoListParagraph" style="margin:0cm 0cm 0pt 18pt;text-indent:-18pt;">
     <span lang="en-us" xml:lang="en-us">
      <span>
       <span style="font-family:Calibri;font-size:14px;">
        1.
       </span>
       <span style="font:7pt/normal 'Times New Roman';">
       </span>
      </span>
     </span>
     <span style="font-size:14px;">
      <span style="font-family:'宋体';">
       采用了多线程的方法，文件传输时使用
      </span>
      <span lang="en-us" xml:lang="en-us">
       <span style="font-family:Calibri;">
        AfxBeginThread()
       </span>
      </span>
      <span style="font-family:'宋体';">
       开启新线程
      </span>
      <span lang="en-us" xml:lang="en-us">
      </span>
     </span>
    </p>
    <span style="font-family:'宋体';font-size:14px;">
    </span>
    <p class="MsoNormal" style="margin:0cm 0cm 0pt;">
     <span lang="en-us" xml:lang="en-us">
      <span style="font-family:Calibri;font-size:14px;">
      </span>
     </span>
    </p>
    <span style="font-family:'宋体';font-size:14px;">
    </span>
    <div style="background:rgb(234,241,221);padding:1pt 4pt;border:1pt solid;">
     <span style="font-family:'宋体';font-size:14px;">
     </span>
     <p align="left" class="MsoNormal">
      <span lang="en-us" style="font-family:'新宋体';color:#0000FF;font-size:9.5pt;" xml:lang="en-us">
       void
      </span>
      <span lang="en-us" style="font-family:'新宋体';font-size:9.5pt;" xml:lang="en-us">
       CClientsockDlg::OnBnClickedSend()
      </span>
     </p>
     <span style="font-family:'宋体';font-size:14px;">
     </span>
     <p align="left" class="MsoNormal">
      <span lang="en-us" style="font-family:'新宋体';font-size:9.5pt;" xml:lang="en-us">
       {
      </span>
     </p>
     <span style="font-family:'宋体';font-size:14px;">
     </span>
     <p align="left" class="MsoNormal">
      <span lang="en-us" style="font-family:'新宋体';font-size:9.5pt;" xml:lang="en-us">
       <span>
       </span>
       pThreadSend = AfxBeginThread(Thread_Send,
       <span style="color:#0000FF;">
        this
       </span>
       );
       <span style="color:#008000;">
        /
       </span>
      </span>
     </p>
     <span style="font-family:'宋体';font-size:14px;">
     </span>
     <p align="left" class="MsoNormal">
      <span lang="en-us" style="font-family:'新宋体';font-size:9.5pt;" xml:lang="en-us">
       <span>
       </span>
       }
      </span>
     </p>
     <span style="font-family:'宋体';font-size:14px;">
     </span>
    </div>
    <span style="font-family:'宋体';font-size:14px;">
    </span>
    <p align="left" class="MsoNormal">
     <span lang="en-us" style="font-family:'新宋体';font-size:9.5pt;" xml:lang="en-us">
     </span>
    </p>
    <span style="font-family:'宋体';font-size:14px;">
    </span>
    <p align="left" class="MsoNormal">
     <span style="font-family:'宋体';font-size:9.5pt;">
      文件的发送和接收都开起了新线程
     </span>
     <span lang="en-us" style="font-family:'新宋体';font-size:9.5pt;" xml:lang="en-us">
     </span>
    </p>
    <span style="font-family:'宋体';font-size:14px;">
    </span>
    <p align="left" class="MsoNormal">
     <span lang="en-us" style="font-family:'新宋体';font-size:9.5pt;" xml:lang="en-us">
     </span>
    </p>
    <span style="font-family:'宋体';font-size:14px;">
    </span>
    <div style="background:rgb(234,241,221);padding:1pt 4pt 4pt;border:1pt solid;">
     <span style="font-family:'宋体';font-size:14px;">
     </span>
     <p align="left" class="MsoNormal">
      <span lang="en-us" style="font-family:'新宋体';font-size:9.5pt;" xml:lang="en-us">
       UINTThread_Send(LPVOID lpParam)
      </span>
     </p>
     <span style="font-family:'宋体';font-size:14px;">
     </span>
     <p align="left" class="MsoNormal">
      <span lang="en-us" style="font-family:'新宋体';font-size:9.5pt;" xml:lang="en-us">
       {
      </span>
     </p>
     <span style="font-family:'宋体';font-size:14px;">
     </span>
     <p align="left" class="MsoNormal">
      <span lang="en-us" style="font-family:'新宋体';font-size:9.5pt;" xml:lang="en-us">
       <span>
       </span>
      </span>
      <span style="font-family:'宋体';font-size:9.5pt;">
       代码略
      </span>
      <span lang="en-us" style="font-family:'新宋体';font-size:9.5pt;" xml:lang="en-us">
       …
      </span>
     </p>
     <span style="font-family:'宋体';font-size:14px;">
     </span>
     <p class="MsoNormal" style="background:rgb(234,241,221);margin:0cm 0cm 0pt;padding:0cm;border:;">
      <span lang="en-us" xml:lang="en-us">
       <span style="font-size:14px;">
        <span style="font-family:Calibri;">
         }
        </span>
       </span>
      </span>
     </p>
     <span style="font-family:'宋体';font-size:14px;">
     </span>
    </div>
    <span style="font-family:'宋体';font-size:14px;">
    </span>
    <p class="MsoNormal" style="margin:0cm 0cm 0pt;">
     <span lang="en-us" xml:lang="en-us">
      <span style="font-family:Calibri;font-size:14px;">
      </span>
     </span>
    </p>
    <span style="font-family:'宋体';font-size:14px;">
    </span>
    <p class="MsoListParagraph" style="margin:0cm 0cm 0pt 18pt;text-indent:-18pt;">
     <span lang="en-us" xml:lang="en-us">
      <span>
       <span style="font-family:Calibri;font-size:14px;">
        2.
       </span>
       <span style="font:7pt/normal 'Times New Roman';">
       </span>
      </span>
     </span>
     <span style="font-size:14px;">
      <span style="font-family:'宋体';">
       支持从配置文件
      </span>
      <span lang="en-us" xml:lang="en-us">
       <span style="font-family:Calibri;">
        configuration.ini
       </span>
      </span>
      <span style="font-family:'宋体';">
       中获取服务器参数
      </span>
      <span lang="en-us" xml:lang="en-us">
      </span>
     </span>
    </p>
    <span style="font-family:'宋体';font-size:14px;">
    </span>
    <p class="MsoNormal" style="margin:0cm 0cm 0pt;">
     <span lang="en-us" xml:lang="en-us">
      <span style="font-family:Calibri;font-size:14px;">
      </span>
     </span>
    </p>
    <span style="font-family:'宋体';font-size:14px;">
    </span>
    <p class="MsoNormal" style="margin:0cm 0cm 0pt;">
     <span style="font-size:14px;">
      <span style="font-family:'宋体';">
       采用
      </span>
      <span lang="en-us" xml:lang="en-us">
       <span style="font-family:Calibri;">
        GetPrivateProfileString()
       </span>
      </span>
      <span style="font-family:'宋体';">
       和
      </span>
      <span lang="en-us" xml:lang="en-us">
       <span style="font-family:Calibri;">
        GetPrivateProfileInt()
       </span>
      </span>
      <span style="font-family:'宋体';">
       分别获取位于
      </span>
      <span lang="en-us" xml:lang="en-us">
       <span style="font-family:Calibri;">
        ServerConfiguration.ini
       </span>
      </span>
      <span style="font-family:'宋体';">
       文件中的
      </span>
      <span lang="en-us" xml:lang="en-us">
       <span style="font-family:Calibri;">
        String
       </span>
      </span>
      <span style="font-family:'宋体';">
       类型的
      </span>
      <span lang="en-us" xml:lang="en-us">
       <span style="font-family:Calibri;">
        IP
       </span>
      </span>
      <span style="font-family:'宋体';">
       和
      </span>
      <span lang="en-us" xml:lang="en-us">
       <span style="font-family:Calibri;">
        int
       </span>
      </span>
      <span style="font-family:'宋体';">
       类型的
      </span>
      <span lang="en-us" xml:lang="en-us">
       <span style="font-family:Calibri;">
        port
       </span>
      </span>
     </span>
    </p>
    <span style="font-family:'宋体';font-size:14px;">
    </span>
    <div style="background:rgb(234,241,221);padding:1pt 4pt;border:1pt solid;">
     <span style="font-family:'宋体';font-size:14px;">
     </span>
     <p align="left" class="MsoNormal">
      <span lang="en-us" style="font-family:'新宋体';font-size:9.5pt;" xml:lang="en-us">
       CString IP;
      </span>
     </p>
     <span style="font-family:'宋体';font-size:14px;">
     </span>
     <p align="left" class="MsoNormal">
      <span lang="en-us" style="font-family:'新宋体';color:#0000FF;font-size:9.5pt;" xml:lang="en-us">
       int
      </span>
      <span lang="en-us" style="font-family:'新宋体';font-size:9.5pt;" xml:lang="en-us">
       port;
      </span>
     </p>
     <span style="font-family:'宋体';font-size:14px;">
     </span>
     <p align="left" class="MsoNormal">
      <span lang="en-us" style="font-family:'新宋体';font-size:9.5pt;" xml:lang="en-us">
       GetPrivateProfileString
      </span>
     </p>
     <span style="font-family:'宋体';font-size:14px;">
     </span>
     <p align="left" class="MsoNormal">
      <span lang="en-us" style="font-family:'新宋体';font-size:9.5pt;" xml:lang="en-us">
       (L
       <span style="color:#a31515;">
        "ServerConfiguration"
       </span>
       ,L
       <span style="color:#a31515;">
        "IP"
       </span>
       ,L
       <span style="color:#a31515;">
        "
       </span>
      </span>
      <span style="font-family:'宋体';color:#a31515;font-size:9.5pt;">
       没有读取到数据
      </span>
      <span lang="en-us" style="font-family:'新宋体';color:#a31515;font-size:9.5pt;" xml:lang="en-us">
       !"
      </span>
      <span lang="en-us" style="font-family:'新宋体';font-size:9.5pt;" xml:lang="en-us">
       ,IP.GetBuffer(10),10,L
       <span style="color:#a31515;">
        ".\\configuration.ini"
       </span>
       );
      </span>
     </p>
     <span style="font-family:'宋体';font-size:14px;">
     </span>
     <p align="left" class="MsoNormal">
      <span lang="en-us" style="font-family:'新宋体';font-size:9.5pt;" xml:lang="en-us">
       port=GetPrivateProfileInt(L
       <span style="color:#a31515;">
        "ServerConfiguration"
       </span>
       ,L
       <span style="color:#a31515;">
        "port"
       </span>
       ,0,L
       <span style="color:#a31515;">
        ".\\configuration.ini"
       </span>
       );
      </span>
     </p>
     <span style="font-family:'宋体';font-size:14px;">
     </span>
    </div>
    <span style="font-family:'宋体';font-size:14px;">
    </span>
    <p class="MsoNormal" style="margin:0cm 0cm 0pt;">
     <span lang="en-us" xml:lang="en-us">
      <span style="font-size:14px;">
       <span style="font-family:Calibri;">
        <span>
        </span>
       </span>
      </span>
     </span>
    </p>
    <span style="font-family:'宋体';font-size:14px;">
    </span>
    <p class="MsoNormal" style="margin:0cm 0cm 0pt;">
     <span lang="en-us" xml:lang="en-us">
      <span style="font-family:Calibri;font-size:14px;">
      </span>
     </span>
    </p>
    <span style="font-family:'宋体';font-size:14px;">
    </span>
    <p class="MsoListParagraph" style="margin:0cm 0cm 0pt 18pt;text-indent:-18pt;">
     <span lang="en-us" xml:lang="en-us">
      <span>
       <span style="font-family:Calibri;font-size:14px;">
        3.
       </span>
       <span style="font:7pt/normal 'Times New Roman';">
       </span>
      </span>
     </span>
     <span style="font-size:14px;">
      <span style="font-family:'宋体';">
       采用了面向对象的设计方式，功能之间按模块划分
      </span>
      <span lang="en-us" xml:lang="en-us">
      </span>
     </span>
    </p>
    <span style="font-family:'宋体';font-size:14px;">
    </span>
    <p class="MsoNormal" style="margin:0cm 0cm 0pt;">
     <span style="font-size:14px;">
      <span lang="en-us" xml:lang="en-us">
       <span style="font-family:Calibri;">
        MFC
       </span>
      </span>
      <span style="font-family:'宋体';">
       本身具有良好的面向对象的特性，本程序严格按照
      </span>
      <span lang="en-us" xml:lang="en-us">
       <span style="font-family:Calibri;">
        MFC
       </span>
      </span>
      <span style="font-family:'宋体';">
       框架结构编写代码，每个按钮对应一个功能函数，降低了代码之间的耦合性，有利于程序的扩展和复用。
      </span>
      <span lang="en-us" xml:lang="en-us">
      </span>
     </span>
    </p>
    <span style="font-family:'宋体';font-size:14px;">
    </span>
    <p class="MsoNormal" style="margin:0cm 0cm 0pt;">
     <span lang="en-us" xml:lang="en-us">
      <span style="font-family:Calibri;font-size:14px;">
      </span>
     </span>
    </p>
    <span style="font-family:'宋体';font-size:14px;">
    </span>
    <div style="background:rgb(234,241,221);padding:1pt 4pt;border:1pt solid;">
     <span style="font-family:'宋体';font-size:14px;">
     </span>
     <p align="left" class="MsoNormal">
      <span lang="en-us" style="font-family:'新宋体';color:#0000FF;font-size:9.5pt;" xml:lang="en-us">
       void
      </span>
      <span lang="en-us" style="font-family:'新宋体';font-size:9.5pt;" xml:lang="en-us">
       CServersockDlg::OnBnClickedChoose()
      </span>
     </p>
     <span style="font-family:'宋体';font-size:14px;">
     </span>
     <p align="left" class="MsoNormal">
      <span lang="en-us" style="font-family:'新宋体';color:#0000FF;font-size:9.5pt;" xml:lang="en-us">
       void
      </span>
      <span lang="en-us" style="font-family:'新宋体';font-size:9.5pt;" xml:lang="en-us">
       CServersockDlg::OnBnClickedSend()
      </span>
     </p>
     <span style="font-family:'宋体';font-size:14px;">
     </span>
     <p align="left" class="MsoNormal">
      <span lang="en-us" style="font-family:'新宋体';color:#0000FF;font-size:9.5pt;" xml:lang="en-us">
       void
      </span>
      <span lang="en-us" style="font-family:'新宋体';font-size:9.5pt;" xml:lang="en-us">
       CServersockDlg::OnBnClickedRecvdata()
      </span>
     </p>
     <span style="font-family:'宋体';font-size:14px;">
     </span>
     <p align="left" class="MsoNormal">
      <span lang="en-us" style="font-family:'新宋体';color:#0000FF;font-size:9.5pt;" xml:lang="en-us">
       void
      </span>
      <span lang="en-us" style="font-family:'新宋体';font-size:9.5pt;" xml:lang="en-us">
       CServersockDlg::OnBnClickedAbout()
      </span>
     </p>
     <span style="font-family:'宋体';font-size:14px;">
     </span>
     <p align="left" class="MsoNormal">
      <span lang="en-us" style="font-family:'新宋体';color:#0000FF;font-size:9.5pt;" xml:lang="en-us">
       void
      </span>
      <span lang="en-us" style="font-family:'新宋体';font-size:9.5pt;" xml:lang="en-us">
       CServersockDlg::OnBnClickedWriteini()
      </span>
     </p>
     <span style="font-family:'宋体';font-size:14px;">
     </span>
    </div>
    <span style="font-family:'宋体';font-size:14px;">
    </span>
    <p class="MsoNormal" style="margin:0cm 0cm 0pt;">
     <span lang="en-us" xml:lang="en-us">
      <span style="font-family:Calibri;font-size:14px;">
      </span>
     </span>
    </p>
    <span style="font-family:'宋体';font-size:14px;">
    </span>
    <p class="MsoNormal" style="margin:0cm 0cm 0pt;">
     <span lang="en-us" xml:lang="en-us">
      <span style="font-family:Calibri;font-size:14px;">
      </span>
     </span>
    </p>
    <span style="font-family:'宋体';font-size:14px;">
    </span>
    <p class="MsoListParagraph" style="margin:0cm 0cm 0pt 18pt;text-indent:-18pt;">
     <span lang="en-us" xml:lang="en-us">
      <span>
       <span style="font-family:Calibri;font-size:14px;">
        4.
       </span>
       <span style="font:7pt/normal 'Times New Roman';">
       </span>
      </span>
     </span>
     <span style="font-size:14px;">
      <span style="font-family:'宋体';">
       采用了
      </span>
      <span lang="en-us" xml:lang="en-us">
       <span style="font-family:Calibri;">
        CSocket
       </span>
      </span>
      <span style="font-family:'宋体';">
       类，代码相对更简单
      </span>
      <span lang="en-us" xml:lang="en-us">
      </span>
     </span>
    </p>
    <span style="font-family:'宋体';font-size:14px;">
    </span>
    <p class="MsoNormal" style="margin:0cm 0cm 0pt;">
     <span style="font-size:14px;">
      <span lang="en-us" xml:lang="en-us">
       <span style="font-family:Calibri;">
        CSocket
       </span>
      </span>
      <span style="font-family:'宋体';">
       类是
      </span>
      <span lang="en-us" xml:lang="en-us">
       <span style="font-family:Calibri;">
        MFC
       </span>
      </span>
      <span style="font-family:'宋体';">
       框架对
      </span>
      <span lang="en-us" xml:lang="en-us">
       <span style="font-family:Calibri;">
        socket
       </span>
      </span>
      <span style="font-family:'宋体';">
       编程中的
      </span>
      <span lang="en-us" xml:lang="en-us">
       <span style="font-family:Calibri;">
        winsockAPI
       </span>
      </span>
      <span style="font-family:'宋体';">
       的封装，因此通过这个类管理收发数据更加便利。代码也跟那个既简单易懂。
      </span>
      <span lang="en-us" xml:lang="en-us">
      </span>
     </span>
    </p>
    <span style="font-family:'宋体';font-size:14px;">
    </span>
    <div style="background:rgb(234,241,221);padding:1pt 4pt;border:1pt solid;">
     <span style="font-family:'宋体';font-size:14px;">
     </span>
     <p class="MsoNormal" style="background:rgb(234,241,221);margin:0cm 0cm 0pt;padding:0cm;border:;">
      <span style="font-size:14px;">
       <span lang="en-us" xml:lang="en-us">
        <span style="font-family:Calibri;">
         <span>
         </span>
         //
        </span>
       </span>
       <span style="font-family:'宋体';">
        创建
       </span>
       <span lang="en-us" xml:lang="en-us">
       </span>
      </span>
     </p>
     <span style="font-family:'宋体';font-size:14px;">
     </span>
     <p class="MsoNormal" style="background:rgb(234,241,221);margin:0cm 0cm 0pt;padding:0cm;border:;">
      <span lang="en-us" xml:lang="en-us">
       <span style="font-size:14px;">
        <span style="font-family:Calibri;">
         <span>
         </span>
         if(!Clientsock.Socket())
        </span>
       </span>
      </span>
     </p>
     <span style="font-family:'宋体';font-size:14px;">
     </span>
     <p class="MsoNormal" style="background:rgb(234,241,221);margin:0cm 0cm 0pt;padding:0cm;border:;">
      <span lang="en-us" xml:lang="en-us">
       <span style="font-size:14px;">
        <span style="font-family:Calibri;">
         <span>
         </span>
         {
        </span>
       </span>
      </span>
     </p>
     <span style="font-family:'宋体';font-size:14px;">
     </span>
     <p class="MsoNormal" style="background:rgb(234,241,221);margin:0cm 0cm 0pt;padding:0cm;border:;">
      <span lang="en-us" xml:lang="en-us">
       <span style="font-size:14px;">
        <span style="font-family:Calibri;">
         <span>
         </span>
         CString str;
        </span>
       </span>
      </span>
     </p>
     <span style="font-family:'宋体';font-size:14px;">
     </span>
     <p class="MsoNormal" style="background:rgb(234,241,221);margin:0cm 0cm 0pt;padding:0cm;border:;">
      <span style="font-size:14px;">
       <span lang="en-us" xml:lang="en-us">
        <span style="font-family:Calibri;">
         <span>
         </span>
         str.Format(_T("Socket
        </span>
       </span>
       <span style="font-family:'宋体';">
        创建失败
       </span>
       <span lang="en-us" xml:lang="en-us">
        <span style="font-family:Calibri;">
         :%d"),GetLastError());
        </span>
       </span>
      </span>
     </p>
     <span style="font-family:'宋体';font-size:14px;">
     </span>
     <p class="MsoNormal" style="background:rgb(234,241,221);margin:0cm 0cm 0pt;padding:0cm;border:;">
      <span lang="en-us" xml:lang="en-us">
       <span style="font-size:14px;">
        <span style="font-family:Calibri;">
         <span>
         </span>
         AfxMessageBox(str);
        </span>
       </span>
      </span>
     </p>
     <span style="font-family:'宋体';font-size:14px;">
     </span>
     <p class="MsoNormal" style="background:rgb(234,241,221);margin:0cm 0cm 0pt;padding:0cm;border:;">
      <span lang="en-us" xml:lang="en-us">
       <span style="font-size:14px;">
        <span style="font-family:Calibri;">
         <span>
         </span>
         }
        </span>
       </span>
      </span>
     </p>
     <span style="font-family:'宋体';font-size:14px;">
     </span>
     <p class="MsoNormal" style="background:rgb(234,241,221);margin:0cm 0cm 0pt;padding:0cm;border:;">
      <span style="font-size:14px;">
       <span lang="en-us" xml:lang="en-us">
        <span style="font-family:Calibri;">
         <span>
         </span>
         //
        </span>
       </span>
       <span style="font-family:'宋体';">
        连接
       </span>
       <span lang="en-us" xml:lang="en-us">
       </span>
      </span>
     </p>
     <span style="font-family:'宋体';font-size:14px;">
     </span>
     <p class="MsoNormal" style="background:rgb(234,241,221);margin:0cm 0cm 0pt;padding:0cm;border:;">
      <span lang="en-us" xml:lang="en-us">
       <span style="font-size:14px;">
        <span style="font-family:Calibri;">
         <span>
         </span>
         if(!Clientsock.Connect(IP,port))
        </span>
       </span>
      </span>
     </p>
     <span style="font-family:'宋体';font-size:14px;">
     </span>
     <p class="MsoNormal" style="background:rgb(234,241,221);margin:0cm 0cm 0pt;padding:0cm;border:;">
      <span lang="en-us" xml:lang="en-us">
       <span style="font-size:14px;">
        <span style="font-family:Calibri;">
         <span>
         </span>
         {
        </span>
       </span>
      </span>
     </p>
     <span style="font-family:'宋体';font-size:14px;">
     </span>
     <p class="MsoNormal" style="background:rgb(234,241,221);margin:0cm 0cm 0pt;padding:0cm;border:;">
      <span lang="en-us" xml:lang="en-us">
       <span style="font-size:14px;">
        <span style="font-family:Calibri;">
         <span>
         </span>
         CString str;
        </span>
       </span>
      </span>
     </p>
     <span style="font-family:'宋体';font-size:14px;">
     </span>
     <p class="MsoNormal" style="background:rgb(234,241,221);margin:0cm 0cm 0pt;padding:0cm;border:;">
      <span style="font-size:14px;">
       <span lang="en-us" xml:lang="en-us">
        <span style="font-family:Calibri;">
         <span>
         </span>
         str.Format(_T("Socket
        </span>
       </span>
       <span style="font-family:'宋体';">
        连接失败
       </span>
       <span lang="en-us" xml:lang="en-us">
        <span style="font-family:Calibri;">
         :%d"),GetLastError());
        </span>
       </span>
      </span>
     </p>
     <span style="font-family:'宋体';font-size:14px;">
     </span>
     <p class="MsoNormal" style="background:rgb(234,241,221);margin:0cm 0cm 0pt;padding:0cm;border:;">
      <span lang="en-us" xml:lang="en-us">
       <span style="font-size:14px;">
        <span style="font-family:Calibri;">
         <span>
         </span>
         AfxMessageBox(str);
        </span>
       </span>
      </span>
     </p>
     <span style="font-family:'宋体';font-size:14px;">
     </span>
     <p class="MsoNormal" style="background:rgb(234,241,221);margin:0cm 0cm 0pt;padding:0cm;border:;">
      <span lang="en-us" xml:lang="en-us">
       <span style="font-size:14px;">
        <span style="font-family:Calibri;">
         <span>
         </span>
         }
        </span>
       </span>
      </span>
     </p>
     <span style="font-family:'宋体';font-size:14px;">
     </span>
     <p class="MsoNormal" style="background:rgb(234,241,221);margin:0cm 0cm 0pt;padding:0cm;border:;">
      <span lang="en-us" xml:lang="en-us">
       <span style="font-size:14px;">
        <span style="font-family:Calibri;">
         <span>
         </span>
         else
        </span>
       </span>
      </span>
     </p>
     <span style="font-family:'宋体';font-size:14px;">
     </span>
     <p class="MsoNormal" style="background:rgb(234,241,221);margin:0cm 0cm 0pt;padding:0cm;border:;">
      <span lang="en-us" xml:lang="en-us">
       <span style="font-size:14px;">
        <span style="font-family:Calibri;">
         <span>
         </span>
         {
        </span>
       </span>
      </span>
     </p>
     <span style="font-family:'宋体';font-size:14px;">
     </span>
     <p class="MsoNormal" style="background:rgb(234,241,221);margin:0cm 0cm 0pt;padding:0cm;border:;">
      <span style="font-size:14px;">
       <span lang="en-us" xml:lang="en-us">
        <span style="font-family:Calibri;">
         <span>
         </span>
         AfxMessageBox(_T("Socket
        </span>
       </span>
       <span style="font-family:'宋体';">
        连接成功
       </span>
       <span lang="en-us" xml:lang="en-us">
        <span style="font-family:Calibri;">
         "));
        </span>
       </span>
      </span>
     </p>
     <span style="font-family:'宋体';font-size:14px;">
     </span>
     <p class="MsoNormal" style="background:rgb(234,241,221);margin:0cm 0cm 0pt;padding:0cm;border:;">
      <span style="font-size:14px;">
       <span lang="en-us" xml:lang="en-us">
        <span style="font-family:Calibri;">
         <span>
         </span>
         <span>
         </span>
        </span>
       </span>
       <span style="font-family:'宋体';">
        代码略
       </span>
       <span lang="en-us" xml:lang="en-us">
        <span style="font-family:Calibri;">
         …
        </span>
       </span>
      </span>
     </p>
     <span style="font-family:'宋体';font-size:14px;">
     </span>
     <p class="MsoNormal" style="background:rgb(234,241,221);margin:0cm 0cm 0pt;padding:0cm;border:;">
      <span style="font-size:14px;">
       <span lang="en-us" xml:lang="en-us">
        <span style="font-family:Calibri;">
         <span>
         </span>
         //
        </span>
       </span>
       <span style="font-family:'宋体';">
        发送
       </span>
       <span lang="en-us" xml:lang="en-us">
       </span>
      </span>
     </p>
     <span style="font-family:'宋体';font-size:14px;">
     </span>
     <p class="MsoNormal" style="background:rgb(234,241,221);margin:0cm 0cm 0pt;padding:0cm;border:;">
      <span lang="en-us" xml:lang="en-us">
       <span style="font-size:14px;">
        <span style="font-family:Calibri;">
         <span>
         </span>
         while(nSize&lt;FindFileData.nFileSizeLow)
        </span>
       </span>
      </span>
     </p>
     <span style="font-family:'宋体';font-size:14px;">
     </span>
     <p class="MsoNormal" style="background:rgb(234,241,221);margin:0cm 0cm 0pt;padding:0cm;border:;">
      <span lang="en-us" xml:lang="en-us">
       <span style="font-size:14px;">
        <span style="font-family:Calibri;">
         <span>
         </span>
         {
        </span>
       </span>
      </span>
     </p>
     <span style="font-family:'宋体';font-size:14px;">
     </span>
     <p class="MsoNormal" style="background:rgb(234,241,221);margin:0cm 0cm 0pt;padding:0cm;border:;">
      <span lang="en-us" xml:lang="en-us">
       <span style="font-size:14px;">
        <span style="font-family:Calibri;">
         <span>
         </span>
         szBuff = new char[1024];
        </span>
       </span>
      </span>
     </p>
     <span style="font-family:'宋体';font-size:14px;">
     </span>
     <p class="MsoNormal" style="background:rgb(234,241,221);margin:0cm 0cm 0pt;padding:0cm;border:;">
      <span lang="en-us" xml:lang="en-us">
       <span style="font-size:14px;">
        <span style="font-family:Calibri;">
         <span>
         </span>
         memset(szBuff,0x00,1024);
        </span>
       </span>
      </span>
     </p>
     <span style="font-family:'宋体';font-size:14px;">
     </span>
     <p class="MsoNormal" style="background:rgb(234,241,221);margin:0cm 0cm 0pt;padding:0cm;border:;">
      <span lang="en-us" xml:lang="en-us">
       <span style="font-size:14px;">
        <span style="font-family:Calibri;">
         <span>
         </span>
         nSend =file.Read(szBuff,1024);
        </span>
       </span>
      </span>
     </p>
     <span style="font-family:'宋体';font-size:14px;">
     </span>
     <p class="MsoNormal" style="background:rgb(234,241,221);margin:0cm 0cm 0pt;padding:0cm;border:;">
      <span style="font-size:14px;">
       <span lang="en-us" xml:lang="en-us">
        <span style="font-family:Calibri;">
         <span>
         </span>
         Clientsock.Send(szBuff,nSend);//
        </span>
       </span>
       <span style="font-family:'宋体';">
        发送数据
       </span>
       <span lang="en-us" xml:lang="en-us">
       </span>
      </span>
     </p>
     <span style="font-family:'宋体';font-size:14px;">
     </span>
     <p class="MsoNormal" style="background:rgb(234,241,221);margin:0cm 0cm 0pt;padding:0cm;border:;">
      <span lang="en-us" xml:lang="en-us">
       <span style="font-size:14px;">
        <span style="font-family:Calibri;">
         <span>
         </span>
         nSize += nSend;
        </span>
       </span>
      </span>
     </p>
     <span style="font-family:'宋体';font-size:14px;">
     </span>
     <p class="MsoNormal" style="background:rgb(234,241,221);margin:0cm 0cm 0pt;padding:0cm;border:;">
      <span lang="en-us" xml:lang="en-us">
       <span style="font-size:14px;">
        <span style="font-family:Calibri;">
         <span>
         </span>
         }
        </span>
       </span>
      </span>
     </p>
     <span style="font-family:'宋体';font-size:14px;">
     </span>
     <p class="MsoNormal" style="background:rgb(234,241,221);margin:0cm 0cm 0pt;padding:0cm;border:;">
      <span lang="en-us" xml:lang="en-us">
       <span style="font-size:14px;">
        <span style="font-family:Calibri;">
         <span>
         </span>
         file.Close();
        </span>
       </span>
      </span>
     </p>
     <span style="font-family:'宋体';font-size:14px;">
     </span>
     <p class="MsoNormal" style="background:rgb(234,241,221);margin:0cm 0cm 0pt;padding:0cm;border:;">
      <span lang="en-us" xml:lang="en-us">
       <span style="font-size:14px;">
        <span style="font-family:Calibri;">
         <span>
         </span>
         delete szBuff;
        </span>
       </span>
      </span>
     </p>
     <span style="font-family:'宋体';font-size:14px;">
     </span>
     <p class="MsoNormal" style="background:rgb(234,241,221);margin:0cm 0cm 0pt;padding:0cm;border:;">
      <span lang="en-us" xml:lang="en-us">
       <span style="font-size:14px;">
        <span style="font-family:Calibri;">
         <span>
         </span>
         Clientsock.Close();
        </span>
       </span>
      </span>
     </p>
     <span style="font-family:'宋体';font-size:14px;">
     </span>
     <p class="MsoNormal" style="background:rgb(234,241,221);margin:0cm 0cm 0pt;padding:0cm;border:;">
      <span lang="en-us" xml:lang="en-us">
       <span style="font-size:14px;">
        <span style="font-family:Calibri;">
         <span>
         </span>
         (dlg-&gt;GetDlgItem(IDC_SEND))-&gt;EnableWindow(TRUE);
        </span>
       </span>
      </span>
     </p>
     <span style="font-family:'宋体';font-size:14px;">
     </span>
     <p class="MsoNormal" style="background:rgb(234,241,221);margin:0cm 0cm 0pt;padding:0cm;border:;">
      <span style="font-size:14px;">
       <span lang="en-us" xml:lang="en-us">
        <span style="font-family:Calibri;">
         <span>
         </span>
         AfxMessageBox(_T("
        </span>
       </span>
       <span style="font-family:'宋体';">
        文件发送成功
       </span>
       <span lang="en-us" xml:lang="en-us">
        <span style="font-family:Calibri;">
         "));
        </span>
       </span>
      </span>
     </p>
     <span style="font-family:'宋体';font-size:14px;">
     </span>
     <p class="MsoNormal" style="background:rgb(234,241,221);margin:0cm 0cm 0pt;padding:0cm;border:;">
      <span lang="en-us" xml:lang="en-us">
       <span style="font-size:14px;">
        <span style="font-family:Calibri;">
         <span>
         </span>
         dlg-&gt;SetDlgItemTextW(IDC_FILEPATHNAME,_T(""));
        </span>
       </span>
      </span>
     </p>
     <span style="font-family:'宋体';font-size:14px;">
     </span>
     <p class="MsoNormal" style="background:rgb(234,241,221);margin:0cm 0cm 0pt;padding:0cm;border:;">
      <span lang="en-us" xml:lang="en-us">
       <span style="font-size:14px;">
        <span style="font-family:Calibri;">
         <span>
         </span>
         }
        </span>
       </span>
      </span>
     </p>
     <span style="font-family:'宋体';font-size:14px;">
     </span>
     <p class="MsoNormal" style="background:rgb(234,241,221);margin:0cm 0cm 0pt;padding:0cm;border:;">
      <span lang="en-us" xml:lang="en-us">
       <span style="font-size:14px;">
        <span style="font-family:Calibri;">
         <span>
         </span>
         return 0;
        </span>
       </span>
      </span>
     </p>
     <span style="font-family:'宋体';font-size:14px;">
     </span>
    </div>
    <span style="font-family:'宋体';font-size:14px;">
    </span>
    <p class="MsoNormal" style="margin:0cm 0cm 0pt;">
     <span lang="en-us" xml:lang="en-us">
      <span style="font-family:Calibri;font-size:14px;">
      </span>
     </span>
    </p>
    <span style="font-family:'宋体';font-size:14px;">
    </span>
    <p class="MsoNormal" style="margin:0cm 0cm 0pt;">
     <span lang="en-us" xml:lang="en-us">
      <span style="font-family:Calibri;font-size:14px;">
      </span>
     </span>
    </p>
    <span style="font-family:'宋体';font-size:14px;">
    </span>
    <p class="MsoListParagraph" style="margin:0cm 0cm 0pt 18pt;text-indent:-18pt;">
     <span lang="en-us" xml:lang="en-us">
      <span>
       <span style="font-family:Calibri;font-size:14px;">
        5.
       </span>
       <span style="font:7pt/normal 'Times New Roman';">
       </span>
      </span>
     </span>
     <span style="font-size:14px;">
      <span style="font-family:'宋体';">
       支持数据在服务器与客户端之间双向传输
      </span>
      <span lang="en-us" xml:lang="en-us">
      </span>
     </span>
    </p>
    <span style="font-family:'宋体';font-size:14px;">
    </span>
    <p class="MsoNormal" style="margin:0cm 0cm 0pt;">
     <span lang="en-us" xml:lang="en-us">
      <span style="font-family:Calibri;font-size:14px;">
      </span>
     </span>
    </p>
    <span style="font-family:'宋体';font-size:14px;">
    </span>
    <p class="MsoNormal" style="margin:0cm 0cm 0pt;">
     <span style="font-size:14px;">
      <span style="font-family:'宋体';">
       本程序不但可以从客户端往服务器端传文件，而且可以从服务器端往客户端传文件。
      </span>
      <span lang="en-us" xml:lang="en-us">
      </span>
     </span>
    </p>
    <span style="font-family:'宋体';font-size:14px;">
    </span>
    <p class="MsoNormal" style="margin:0cm 0cm 0pt;">
     <span style="font-size:14px;">
      <span style="font-family:'宋体';">
       但是互传文件的方式并不是完全相同的。
      </span>
      <span lang="en-us" xml:lang="en-us">
      </span>
     </span>
    </p>
    <span style="font-family:'宋体';font-size:14px;">
    </span>
    <p class="MsoNormal" style="margin:0cm 0cm 0pt;">
     <span style="font-size:14px;">
      <span style="font-family:'宋体';">
       服务器端不管是接收文件还是发送文件始终是对绑定的端口进行监听。
      </span>
      <span lang="en-us" xml:lang="en-us">
      </span>
     </span>
    </p>
    <span style="font-family:'宋体';font-size:14px;">
    </span>
    <div style="background:rgb(234,241,221);padding:1pt 4pt;border:1pt solid;">
     <span style="font-family:'宋体';font-size:14px;">
     </span>
     <p align="left" class="MsoNormal">
      <span lang="en-us" style="font-family:'新宋体';font-size:9.5pt;" xml:lang="en-us">
       <span>
       </span>
       <span style="color:#008000;">
        //
       </span>
      </span>
      <span style="font-family:'宋体';color:#008000;font-size:9.5pt;">
       绑定
      </span>
      <span lang="en-us" style="font-family:'新宋体';font-size:9.5pt;" xml:lang="en-us">
      </span>
     </p>
     <span style="font-family:'宋体';font-size:14px;">
     </span>
     <p align="left" class="MsoNormal">
      <span lang="en-us" style="font-family:'新宋体';font-size:9.5pt;" xml:lang="en-us">
       <span>
       </span>
       <span style="color:#0000FF;">
        if
       </span>
       (!Serversock.Bind(port))
      </span>
     </p>
     <span style="font-family:'宋体';font-size:14px;">
     </span>
     <p align="left" class="MsoNormal">
      <span lang="en-us" style="font-family:'新宋体';font-size:9.5pt;" xml:lang="en-us">
       <span>
       </span>
       {
      </span>
     </p>
     <span style="font-family:'宋体';font-size:14px;">
     </span>
     <p align="left" class="MsoNormal">
      <span lang="en-us" style="font-family:'新宋体';font-size:9.5pt;" xml:lang="en-us">
       <span>
       </span>
       CString str;
      </span>
     </p>
     <span style="font-family:'宋体';font-size:14px;">
     </span>
     <p align="left" class="MsoNormal">
      <span lang="en-us" style="font-family:'新宋体';font-size:9.5pt;" xml:lang="en-us">
       <span>
       </span>
       <span>
       </span>
       str.Format(_T(
       <span style="color:#a31515;">
        "Socket
       </span>
      </span>
      <span style="font-family:'宋体';color:#a31515;font-size:9.5pt;">
       绑定失败
      </span>
      <span lang="en-us" style="font-family:'新宋体';color:#a31515;font-size:9.5pt;" xml:lang="en-us">
       :
 %d"
      </span>
      <span lang="en-us" style="font-family:'新宋体';font-size:9.5pt;" xml:lang="en-us">
       ),GetLastError());
      </span>
     </p>
     <span style="font-family:'宋体';font-size:14px;">
     </span>
     <p align="left" class="MsoNormal">
      <span lang="en-us" style="font-family:'新宋体';font-size:9.5pt;" xml:lang="en-us">
       <span>
       </span>
       AfxMessageBox(str);
      </span>
     </p>
     <span style="font-family:'宋体';font-size:14px;">
     </span>
     <p align="left" class="MsoNormal">
      <span lang="en-us" style="font-family:'新宋体';font-size:9.5pt;" xml:lang="en-us">
       <span>
       </span>
       }
      </span>
     </p>
     <span style="font-family:'宋体';font-size:14px;">
     </span>
     <p align="left" class="MsoNormal">
      <span lang="en-us" style="font-family:'新宋体';font-size:9.5pt;" xml:lang="en-us">
       <span>
       </span>
       <span style="color:#008000;">
        //
       </span>
      </span>
      <span style="font-family:'宋体';color:#008000;font-size:9.5pt;">
       监听
      </span>
      <span lang="en-us" style="font-family:'新宋体';font-size:9.5pt;" xml:lang="en-us">
      </span>
     </p>
     <span style="font-family:'宋体';font-size:14px;">
     </span>
     <p align="left" class="MsoNormal">
      <span lang="en-us" style="font-family:'新宋体';font-size:9.5pt;" xml:lang="en-us">
       <span>
       </span>
       <span style="color:#0000FF;">
        if
       </span>
       (!Serversock.Listen(10))
      </span>
     </p>
     <span style="font-family:'宋体';font-size:14px;">
     </span>
     <p align="left" class="MsoNormal">
      <span lang="en-us" style="font-family:'新宋体';font-size:9.5pt;" xml:lang="en-us">
       <span>
       </span>
       {
      </span>
     </p>
     <span style="font-family:'宋体';font-size:14px;">
     </span>
     <p align="left" class="MsoNormal">
      <span lang="en-us" style="font-family:'新宋体';font-size:9.5pt;" xml:lang="en-us">
       <span>
       </span>
       CString str;
      </span>
     </p>
     <span style="font-family:'宋体';font-size:14px;">
     </span>
     <p align="left" class="MsoNormal">
      <span lang="en-us" style="font-family:'新宋体';font-size:9.5pt;" xml:lang="en-us">
       <span>
       </span>
       str.Format(_T(
       <span style="color:#a31515;">
        "Socket
       </span>
      </span>
      <span style="font-family:'宋体';color:#a31515;font-size:9.5pt;">
       监听失败
      </span>
      <span lang="en-us" style="font-family:'新宋体';color:#a31515;font-size:9.5pt;" xml:lang="en-us">
       :%d"
      </span>
      <span lang="en-us" style="font-family:'新宋体';font-size:9.5pt;" xml:lang="en-us">
       ),GetLastError());
      </span>
     </p>
     <span style="font-family:'宋体';font-size:14px;">
     </span>
     <p align="left" class="MsoNormal">
      <span lang="en-us" style="font-family:'新宋体';font-size:9.5pt;" xml:lang="en-us">
       <span>
       </span>
       AfxMessageBox(str);
      </span>
     </p>
     <span style="font-family:'宋体';font-size:14px;">
     </span>
     <p align="left" class="MsoNormal">
      <span lang="en-us" style="font-family:'新宋体';font-size:9.5pt;" xml:lang="en-us">
       <span>
       </span>
       }
      </span>
     </p>
     <span style="font-family:'宋体';font-size:14px;">
     </span>
    </div>
    <span style="font-family:'宋体';font-size:14px;">
    </span>
    <p class="MsoNormal" style="margin:0cm 0cm 0pt;">
     <span lang="en-us" xml:lang="en-us">
      <span style="font-family:Calibri;font-size:14px;">
      </span>
     </span>
    </p>
    <span style="font-family:'宋体';font-size:14px;">
    </span>
    <p class="MsoNormal" style="margin:0cm 0cm 0pt;">
     <span lang="en-us" xml:lang="en-us">
      <span style="font-family:Calibri;font-size:14px;">
      </span>
     </span>
    </p>
    <span style="font-family:'宋体';font-size:14px;">
    </span>
    <p class="MsoNormal" style="margin:0cm 0cm 0pt;">
     <span style="font-size:14px;">
      <span style="font-family:'宋体';">
       客户端不管是接收文件还是发送文件始终是进行连接。
      </span>
      <span lang="en-us" xml:lang="en-us">
      </span>
     </span>
    </p>
    <span style="font-family:'宋体';font-size:14px;">
    </span>
    <div style="background:rgb(234,241,221);padding:1pt 4pt;border:1pt solid;">
     <span style="font-family:'宋体';font-size:14px;">
     </span>
     <p align="left" class="MsoNormal">
      <span lang="en-us" style="font-family:'新宋体';font-size:9.5pt;" xml:lang="en-us">
       <span>
       </span>
       <span style="color:#0000FF;">
        if
       </span>
       (!Clientsock.Connect(IP,port))
      </span>
     </p>
     <span style="font-family:'宋体';font-size:14px;">
     </span>
     <p align="left" class="MsoNormal">
      <span lang="en-us" style="font-family:'新宋体';font-size:9.5pt;" xml:lang="en-us">
       <span>
       </span>
       {
      </span>
     </p>
     <span style="font-family:'宋体';font-size:14px;">
     </span>
     <p align="left" class="MsoNormal">
      <span lang="en-us" style="font-family:'新宋体';font-size:9.5pt;" xml:lang="en-us">
       <span>
       </span>
       CString str;
      </span>
     </p>
     <span style="font-family:'宋体';font-size:14px;">
     </span>
     <p align="left" class="MsoNormal">
      <span lang="en-us" style="font-family:'新宋体';font-size:9.5pt;" xml:lang="en-us">
       <span>
       </span>
       str.Format(_T(
       <span style="color:#a31515;">
        "Socket
       </span>
      </span>
      <span style="font-family:'宋体';color:#a31515;font-size:9.5pt;">
       连接失
      </span>
      <span lang="en-us" style="font-family:'新宋体';color:#a31515;font-size:9.5pt;" xml:lang="en-us">
       ì
      </span>
      <span style="font-family:'宋体';color:#a31515;font-size:9.5pt;">
       败
      </span>
      <span lang="en-us" style="font-family:'新宋体';color:#a31515;font-size:9.5pt;" xml:lang="en-us">
       :%d"
      </span>
      <span lang="en-us" style="font-family:'新宋体';font-size:9.5pt;" xml:lang="en-us">
       ),GetLastError());
      </span>
     </p>
     <span style="font-family:'宋体';font-size:14px;">
     </span>
     <p align="left" class="MsoNormal">
      <span lang="en-us" style="font-family:'新宋体';font-size:9.5pt;" xml:lang="en-us">
       <span>
       </span>
       AfxMessageBox(str);
      </span>
     </p>
     <span style="font-family:'宋体';font-size:14px;">
     </span>
     <p align="left" class="MsoNormal">
      <span lang="en-us" style="font-family:'新宋体';font-size:9.5pt;" xml:lang="en-us">
       <span>
       </span>
       }
      </span>
     </p>
     <span style="font-family:'宋体';font-size:14px;">
     </span>
     <p align="left" class="MsoNormal">
      <span lang="en-us" style="font-family:'新宋体';font-size:9.5pt;" xml:lang="en-us">
       <span>
       </span>
       <span style="color:#0000FF;">
        else
       </span>
      </span>
     </p>
     <span style="font-family:'宋体';font-size:14px;">
     </span>
     <p align="left" class="MsoNormal">
      <span lang="en-us" style="font-family:'新宋体';font-size:9.5pt;" xml:lang="en-us">
       <span>
       </span>
       {
      </span>
     </p>
     <span style="font-family:'宋体';font-size:14px;">
     </span>
     <p align="left" class="MsoNormal">
      <span lang="en-us" style="font-family:'新宋体';font-size:9.5pt;" xml:lang="en-us">
       <span>
       </span>
      </span>
      <span style="font-family:'宋体';font-size:9.5pt;">
       略
      </span>
      <span lang="en-us" style="font-family:'新宋体';font-size:9.5pt;" xml:lang="en-us">
       …
      </span>
     </p>
     <span style="font-family:'宋体';font-size:14px;">
     </span>
    </div>
    <span style="font-family:'宋体';font-size:14px;">
    </span>
    <p class="MsoNormal" style="margin:0cm 0cm 0pt;">
     <span lang="en-us" xml:lang="en-us">
      <span style="font-family:Calibri;font-size:14px;">
      </span>
     </span>
    </p>
    <span style="font-family:'宋体';font-size:14px;">
    </span>
    <p class="MsoListParagraph" style="margin:0cm 0cm 0pt 18pt;text-indent:-18pt;">
     <span lang="en-us" xml:lang="en-us">
      <span>
       <span style="font-family:Calibri;font-size:14px;">
        6.
       </span>
       <span style="font:7pt/normal 'Times New Roman';">
       </span>
      </span>
     </span>
     <span style="font-size:14px;">
      <span style="font-family:'宋体';">
       完全图形化操作界面
      </span>
      <span lang="en-us" xml:lang="en-us">
      </span>
     </span>
    </p>
    <span style="font-family:'宋体';font-size:14px;">
    </span>
    <p class="MsoNormal" style="margin:0cm 0cm 0pt;">
     <span lang="en-us" xml:lang="en-us">
      <span style="font-family:Calibri;font-size:14px;">
      </span>
     </span>
    </p>
    <span style="font-family:'宋体';font-size:14px;">
    </span>
    <p class="MsoNormal" style="margin:0cm 0cm 0pt;">
     <span lang="en-us" xml:lang="en-us">
      <span style="font-family:Calibri;font-size:14px;">
      </span>
     </span>
    </p>
    <span style="font-family:'宋体';font-size:14px;">
    </span>
    <p class="MsoListParagraph" style="margin:0cm 0cm 0pt 21pt;text-indent:-21pt;">
     <span style="font-size:14px;">
      <span lang="en-us" xml:lang="en-us">
       <span>
        <span style="font-family:Calibri;">
         二．
        </span>
       </span>
      </span>
      <span style="font-family:'宋体';">
       软件使用说明
      </span>
      <span lang="en-us" xml:lang="en-us">
      </span>
     </span>
    </p>
    <span style="font-family:'宋体';font-size:14px;">
    </span>
    <p class="MsoNormal" style="margin:0cm 0cm 0pt;">
     <span lang="en-us" xml:lang="en-us">
      <span style="font-family:Calibri;font-size:14px;">
      </span>
     </span>
    </p>
    <span style="font-family:'宋体';font-size:14px;">
    </span>
    <p class="MsoNormal" style="margin:0cm 0cm 0pt;">
     <span style="font-size:14px;">
      <span style="font-family:'宋体';">
       客户端主界面如图所示：
      </span>
      <span lang="en-us" xml:lang="en-us">
      </span>
     </span>
    </p>
    <span style="font-family:'宋体';font-size:14px;">
    </span>
    <p class="MsoNormal" style="margin:0cm 0cm 0pt;">
     <span lang="en-us" xml:lang="en-us">
      <span style="font-family:Calibri;font-size:14px;">
      </span>
     </span>
    </p>
    <span style="font-family:'宋体';font-size:14px;">
    </span>
    <p class="MsoListParagraph" style="margin:0cm 0cm 0pt 21pt;text-indent:-21pt;">
     <span lang="en-us" style="font-family:Wingdings;" xml:lang="en-us">
      <span>
       <span style="font-size:14px;">
        u
       </span>
       <span style="font:7pt/normal 'Times New Roman';">
       </span>
      </span>
     </span>
     <span style="font-size:14px;">
      <span style="font-family:'宋体';">
       单击“选择文件”弹出文件对话框，选择一个要发送的文件，同时保存文件的路径。
      </span>
      <span lang="en-us" xml:lang="en-us">
      </span>
     </span>
    </p>
    <span style="font-family:'宋体';font-size:14px;">
    </span>
    <p class="MsoListParagraph" style="margin:0cm 0cm 0pt 21pt;text-indent:-21pt;">
     <span lang="en-us" style="font-family:Wingdings;" xml:lang="en-us">
      <span>
       <span style="font-size:14px;">
        u
       </span>
       <span style="font:7pt/normal 'Times New Roman';">
       </span>
      </span>
     </span>
     <span style="font-size:14px;">
      <span style="font-family:'宋体';">
       单击“发送”则会读取
      </span>
      <span lang="en-us" xml:lang="en-us">
       <span style="font-family:Calibri;">
        ServerConfiguration.ini
       </span>
      </span>
      <span style="font-family:'宋体';">
       文件中的配置信息（
      </span>
      <span lang="en-us" xml:lang="en-us">
       <span style="font-family:Calibri;">
        IP
       </span>
      </span>
      <span style="font-family:'宋体';">
       和
      </span>
      <span lang="en-us" xml:lang="en-us">
       <span style="font-family:Calibri;">
        port
       </span>
      </span>
      <span style="font-family:'宋体';">
       ），并根据此信息建立
      </span>
      <span lang="en-us" xml:lang="en-us">
       <span style="font-family:Calibri;">
        Socket
       </span>
      </span>
      <span style="font-family:'宋体';">
       连接，发送文件。注意：服务器端应该先单击了“接受客户端数据”，否则发送失败。
      </span>
      <span lang="en-us" xml:lang="en-us">
      </span>
     </span>
    </p>
    <span style="font-family:'宋体';font-size:14px;">
    </span>
    <p class="MsoListParagraph" style="margin:0cm 0cm 0pt 21pt;text-indent:-21pt;">
     <span lang="en-us" style="font-family:Wingdings;" xml:lang="en-us">
      <span>
       <span style="font-size:14px;">
        u
       </span>
       <span style="font:7pt/normal 'Times New Roman';">
       </span>
      </span>
     </span>
     <span style="font-size:14px;">
      <span style="font-family:'宋体';">
       单击“接收”也会读取
      </span>
      <span lang="en-us" xml:lang="en-us">
       <span style="font-family:Calibri;">
        ServerConfiguration.ini
       </span>
      </span>
      <span style="font-family:'宋体';">
       文件中的配置信息（
      </span>
      <span lang="en-us" xml:lang="en-us">
       <span style="font-family:Calibri;">
        IP
       </span>
      </span>
      <span style="font-family:'宋体';">
       和
      </span>
      <span lang="en-us" xml:lang="en-us">
       <span style="font-family:Calibri;">
        port
       </span>
      </span>
      <span style="font-family:'宋体';">
       ），并根据此信息建立
      </span>
      <span lang="en-us" xml:lang="en-us">
       <span style="font-family:Calibri;">
        Socket
       </span>
      </span>
      <span style="font-family:'宋体';">
       连接，接收文件。注意：服务器端应该先选择了向客户端发送的文件，并单击了“发送”，否则接受失败。
      </span>
      <span lang="en-us" xml:lang="en-us">
      </span>
     </span>
    </p>
    <span style="font-family:'宋体';font-size:14px;">
    </span>
    <p class="MsoListParagraph" style="margin:0cm 0cm 0pt 21pt;text-indent:-21pt;">
     <span lang="en-us" style="font-family:Wingdings;" xml:lang="en-us">
      <span>
       <span style="font-size:14px;">
        u
       </span>
       <span style="font:7pt/normal 'Times New Roman';">
       </span>
      </span>
     </span>
     <span style="font-size:14px;">
      <span style="font-family:'宋体';">
       单击“读取配置文件”，会从
      </span>
      <span lang="en-us" xml:lang="en-us">
       <span style="font-family:Calibri;">
        ServerConfiguration.ini
       </span>
      </span>
      <span style="font-family:'宋体';">
       文件中读取配置信息，并以可编辑的文本形式显示出来，修改完后，单击“写入配置文件”，会将修改后的信息保存到配置文件中。
      </span>
      <span lang="en-us" xml:lang="en-us">
      </span>
     </span>
    </p>
    <span style="font-family:'宋体';font-size:14px;">
    </span>
    <p class="MsoListParagraph" style="margin:0cm 0cm 0pt 21pt;text-indent:-21pt;">
     <span lang="en-us" style="font-family:Wingdings;" xml:lang="en-us">
      <span>
       <span style="font-size:14px;">
        u
       </span>
       <span style="font:7pt/normal 'Times New Roman';">
       </span>
      </span>
     </span>
     <span style="font-size:14px;">
      <span style="font-family:'宋体';">
       单击“关于”可以了解到软件相关信息。
      </span>
      <span lang="en-us" xml:lang="en-us">
      </span>
     </span>
    </p>
    <span style="font-family:'宋体';font-size:14px;">
    </span>
    <p class="MsoListParagraph" style="margin:0cm 0cm 0pt 21pt;text-indent:-21pt;">
     <span lang="en-us" style="font-family:Wingdings;" xml:lang="en-us">
      <span>
       <span style="font-size:14px;">
        u
       </span>
       <span style="font:7pt/normal 'Times New Roman';">
       </span>
      </span>
     </span>
     <span style="font-size:14px;">
      <span style="font-family:'宋体';">
       代码注释里有更详细的说明
      </span>
     </span>
    </p>
    <p class="MsoListParagraph" style="margin:0cm 0cm 0pt 21pt;text-indent:-21pt;">
     <span style="font-size:14px;">
      <span style="font-family:'宋体';">
       <img alt="" src="https://img-blog.csdn.net/20130925183605687?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbGVpeGlhb2h1YTEwMjA=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center"/>
      </span>
     </span>
    </p>
    <span style="font-size:14px;">
     <span style="font-family:'宋体';">
     </span>
    </span>
    <p>
     <span style="font-size:14px;">
      服务器端主界面如图所示
     </span>
    </p>
    <p>
     <span style="font-family:Calibri;font-size:14px;">
     </span>
    </p>
    <p>
     <span style="font-size:14px;">
      <span style="font-size:14px;">
       <span style="font-size:14px;">
        u
       </span>
      </span>
     </span>
     <span style="font-size:14px;">
      单击“接受客户端数据”，开始监听客户端的链接。
     </span>
    </p>
    <p>
     <span style="font-size:14px;">
      u
     </span>
     <span style="font-size:14px;">
      单击“选择文件”弹出文件对话框，选择一个要发送的文件，同时保存文件的路径。
     </span>
    </p>
    <p>
     <span style="font-size:14px;">
      u
     </span>
     <span style="font-size:14px;">
      单击“发送”则会读取
      <span style="font-family:Calibri;">
       ServerConfiguration.ini
      </span>
      文件中的配置信息（
      <span style="font-family:Calibri;">
       port
      </span>
      ），并监听对应端口，准备发送文件。注意：客户端选择“接收”以后才能发送成功。
     </span>
    </p>
    <p>
     <span style="font-size:14px;">
      u
     </span>
     <span style="font-size:14px;">
      单击“读取配置文件”，会从
      <span style="font-family:Calibri;">
       ServerConfiguration.ini
      </span>
      文件中读取配置信息，并以可编辑的文本形式显示出来，修改完后，单击“写入配置文件”，会将修改后的信息保存到配置文件中。但是服务器的
      <span style="font-family:Calibri;">
       IP
      </span>
      是不可以修改的，它是在程序开始运行时从服务器所在机器的网卡上获取的。
     </span>
    </p>
    <p>
     <span style="font-size:14px;">
      u
     </span>
     <span style="font-size:14px;">
      单击“关于”可以了解到软件相关信息。
     </span>
    </p>
    <p>
     <span style="font-size:14px;">
      u
     </span>
     <span style="font-size:14px;">
      代码注释里有更详细的说明
     </span>
    </p>
    <p>
     <span style="font-family:Calibri;font-size:14px;">
      <img alt="" src="https://img-blog.csdn.net/20130925183744046?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbGVpeGlhb2h1YTEwMjA=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center"/>
     </span>
    </p>
    <p>
    </p>
    <p class="MsoListParagraph" style="margin:0cm 0cm 0pt 21pt;text-indent:-21pt;">
    </p>
    <p class="MsoListParagraph" style="margin:0cm 0cm 0pt 21pt;text-indent:-21pt;">
    </p>
    <p class="MsoListParagraph" style="margin:0cm 0cm 0pt 21pt;text-indent:-21pt;">
     <span style="font-size:14px;">
      <span style="font-family:'宋体';">
      </span>
     </span>
    </p>
    <p class="MsoListParagraph" style="margin:0cm 0cm 0pt 21pt;text-indent:-21pt;">
     <span style="font-size:14px;">
      <span style="font-family:'宋体';">
       代码下载地址：
       <a href="http://download.csdn.net/detail/leixiaohua1020/6320417">
        http://download.csdn.net/detail/leixiaohua1020/6320417
       </a>
      </span>
     </span>
    </p>
    <p class="MsoListParagraph" style="margin:0cm 0cm 0pt 21pt;text-indent:-21pt;">
     <span style="font-size:14px;">
      <span style="font-family:'宋体';">
      </span>
     </span>
    </p>
    <p class="MsoListParagraph" style="margin:0cm 0cm 0pt 21pt;text-indent:-21pt;">
     <span style="font-size:14px;">
      <span style="font-family:'宋体';">
       在此附上客户端使用CSocket发起连接的代码
      </span>
     </span>
    </p>
    <pre class="cpp">//----------------------------发送文件的线程------------------------------
UINT Thread_Send(LPVOID lpParam)
{
	CClientsockDlg *dlg=(CClientsockDlg *)lpParam;
    (dlg-&gt;GetDlgItem(IDC_SEND))-&gt;EnableWindow(FALSE);

	CSocket Clientsock; //definition socket.
	if(!AfxSocketInit())
	{
		AfxMessageBox(IDP_SOCKETS_INIT_FAILED);
	}

	CString IP;
	int port;
	GetPrivateProfileString(L"ServerConfiguration",L"IP",L"没有读取到数据！",IP.GetBuffer(100),100,L".\\configuration.ini");
	port=GetPrivateProfileInt(L"ServerConfiguration",L"port",0,L".\\configuration.ini");
	//创建
	if(!Clientsock.Socket())
	{
		CString str;
		str.Format(_T("Socket创建失败: %d"),GetLastError());
		AfxMessageBox(str);
	}
	//连接
//	if(!Clientsock.Connect(_T("127.0.0.1"),8088))
	if(!Clientsock.Connect(IP,port))
	{
		CString str;
		str.Format(_T("Socket连接失败: %d"),GetLastError());
		AfxMessageBox(str);
	}
	else
	{
		AfxMessageBox(_T("Socket连接成功"));
		WIN32_FIND_DATA FindFileData;
		CString strPathName; //定义用来保存发送文件路径的CString对象
		dlg-&gt;GetDlgItemTextW(IDC_FILEPATHNAME,strPathName);
		FindClose(FindFirstFile(strPathName,&amp;FindFileData));
		Clientsock.Send(&amp;FindFileData,sizeof(WIN32_FIND_DATA));
        
		CFile file;
		if(!file.Open(strPathName,CFile::modeRead|CFile::typeBinary))
		{
			AfxMessageBox(_T("文件不存在"));
			return 1;
		}

		UINT nSize = 0;
		UINT nSend = 0;

		char *szBuff=NULL;
	//发送
		while(nSize&lt;FindFileData.nFileSizeLow)
		{
            szBuff = new char[1024];
			memset(szBuff,0x00,1024);
			nSend = file.Read(szBuff,1024);
			Clientsock.Send(szBuff,nSend);//发送数据
			nSize += nSend;
		}
		file.Close();
		delete szBuff;
		Clientsock.Close();
		(dlg-&gt;GetDlgItem(IDC_SEND))-&gt;EnableWindow(TRUE);
		AfxMessageBox(_T("文件发送成功"));
		dlg-&gt;SetDlgItemTextW(IDC_FILEPATHNAME,_T(""));
	}
	return 0;
}</pre>
    <p class="MsoListParagraph" style="margin:0cm 0cm 0pt 21pt;text-indent:-21pt;">
     <br/>
    </p>
    <p>
     以及服务器端使用CSocket监听的代码：
    </p>
    <span style="font-family:'宋体';font-size:14px;">
    </span>
    <pre class="cpp">//----------------------------监听文件的线程------------------------------
UINT Thread_Func(LPVOID lpParam)  //接收文件的线程函数
{
	CServersockDlg *dlg = (CServersockDlg *)lpParam; //获取对话框指针
    (dlg-&gt;GetDlgItem(IDC_RECVDATA))-&gt;EnableWindow(FALSE);

	if(!AfxSocketInit())
	{
		AfxMessageBox(IDP_SOCKETS_INIT_FAILED);
	}

	CString IP;
	int port;
	GetPrivateProfileString(L"ServerConfiguration",L"IP",L"没有读取到数据！",IP.GetBuffer(100),100,L".\\configuration.ini");
	port=GetPrivateProfileInt(L"ServerConfiguration",L"port",0,L".\\configuration.ini");
    
	char errBuf[100]={0};// 临时缓存
    
	SYSTEMTIME t; //系统时间结构 

	CFile logErrorfile;
	if(!logErrorfile.Open(_T("logErrorfile.txt"),CFile::modeCreate|CFile::modeReadWrite))
	{
		return 1;
	}

	CSocket Serversock;
    CSocket Clientsock;
	//创建
	if(!Serversock.Socket())
	{
		CString str;
		str.Format(_T("Socket创建失败: %d"),GetLastError());
		AfxMessageBox(str);
	}

	BOOL bOptVal = TRUE;
	int bOptLen = sizeof(BOOL);
	Serversock.SetSockOpt(SO_REUSEADDR,(void *)&amp;bOptVal,bOptLen,SOL_SOCKET);

	//绑定
	if(!Serversock.Bind(port))
	{
		CString str;
		str.Format(_T("Socket绑定失败: %d"),GetLastError());
		AfxMessageBox(str);
	}
    //监听 
	if(!Serversock.Listen(10))
	{
		CString str;
		str.Format(_T("Socket监听失败: %d"),GetLastError());
		AfxMessageBox(str);
	}

	GetLocalTime(&amp;t);
	sprintf_s(errBuf,"服务器已经启动...正在等待接收文件...\r\n时间：%d年%d月%d日 %2d:%2d:%2d \r\n",t.wYear,t.wMonth,t.wDay,
		t.wHour,t.wMinute,t.wSecond);
	int len = strlen(errBuf);
	logErrorfile.Write(errBuf,len);
	AfxMessageBox(_T("启动成功等待接收文件"));
	while(1)
	{
		//AfxMessageBox(_T("服务器启动成功..."));
		if(!Serversock.Accept(Clientsock)) //等待接收 
		{
			continue;
		}
		else
		{
			WIN32_FIND_DATA FileInfo;
			Clientsock.Receive(&amp;FileInfo,sizeof(WIN32_FIND_DATA));

			CFile file;
			file.Open(FileInfo.cFileName,CFile::modeCreate|CFile::modeWrite);
			//AfxMessageBox(FileInfo.cFileName);
			int length = sizeof(FileInfo.cFileName);
			logErrorfile.Write(FileInfo.cFileName,length);
			//Receive文件的数据

			UINT nSize = 0;
			UINT nData = 0;

			char *szBuff=NULL;

			while(nSize&lt;FileInfo.nFileSizeLow)
			{
				szBuff = new char[1024];
				memset(szBuff,0x00,1024);
				nData=Clientsock.Receive(szBuff,1024);
			    file.Write(szBuff,nData);
				nSize+=nData;
			}

			delete szBuff;
			Serversock.Close();
			Clientsock.Close();
			file.Close();
			(dlg-&gt;GetDlgItem(IDC_RECVDATA))-&gt;EnableWindow(TRUE);
			sprintf_s(errBuf,"文件接收成功...\r\n时间：%d年%d月%d日 %2d:%2d:%2d \r\n",t.wYear,t.wMonth,t.wDay,
		t.wHour,t.wMinute,t.wSecond);
			int len = strlen(errBuf);
			logErrorfile.Write(errBuf,len);
			//AfxMessageBox(_T("文件接收成功..."));
		    break;
		}
	}
	return 0;
}</pre>
    <p>
     <br/>
    </p>
    <p>
    </p>
   </div>
  </div>
  <div style="display:none;" class="hide-article-box text-center csdn-tracking-statistics tracking-click" data-mod="popu_376">
   <a class="btn btn-red-hollow" id="btn-readmore">
    阅读更多
   </a>
  </div>
 </article>
 <div class="article-bar-bottom">
  <div class="article-copyright">
   版权声明：本文为博主原创文章，未经博主允许不得转载。			https://blog.csdn.net/leixiaohua1020/article/details/12025731
  </div>
  <div class="tags-box artic-tag-box">
   <span class="label">
    文章标签：
   </span>
   <a class="tag-link" href="http://so.csdn.net/so/search/s.do?q=socket&amp;t=blog" target="_blank">
    socket
   </a>
   <a class="tag-link" href="http://so.csdn.net/so/search/s.do?q=面向对象&amp;t=blog" target="_blank">
    面向对象
   </a>
   <a class="tag-link" href="http://so.csdn.net/so/search/s.do?q=文件传输&amp;t=blog" target="_blank">
    文件传输
   </a>
   <a class="tag-link" href="http://so.csdn.net/so/search/s.do?q=对话框&amp;t=blog" target="_blank">
    对话框
   </a>
   <a class="tag-link" href="http://so.csdn.net/so/search/s.do?q=CSocket&amp;t=blog" target="_blank">
    CSocket
   </a>
  </div>
  <div class="tags-box">
   <span class="label">
    个人分类：
   </span>
   <a class="tag-link" href="https://blog.csdn.net/leixiaohua1020/article/category/1647545" target="_blank">
    纯编程
   </a>
   <a class="tag-link" href="https://blog.csdn.net/leixiaohua1020/article/category/1645655" target="_blank">
    计算机网络
   </a>
  </div>
 </div>
 <!-- !empty($pre_next_article[0]) -->
</div>
<div class="recommend-box">
                            <div style="background: #fff; border: dashed 1px #666; padding-left: 1em; padding-top: 1em; padding-bottom: 1em;">
                                <span style="font-size: 0.8em; font-weight: bold;">
                                    此PDF由<a style="color:#0000ff" href="http://www.github.com/spygg"  target="_blank">spygg</a>生成,请尊重原作者版权!!!
                                    <br/>
                                    我的邮箱:liushidc@163.com
                                </span>
                                </div> 
                        </div>
                    </main>
      
                </div>

            <script>
                var recommendCount = 0;
                var articleTit = "";
                var articleId = "";
                var commentscount = 0;

                //1禁止评论，2正常
                var commentAuth = 1;
                //百度搜索
                var baiduKey = "";
                var needInsertBaidu = "";
            </script>
            <script src="https://csdnimg.cn/release/phoenix/template/js/detail-effe72036e.min.js"></script>
            </body>
        </html>