
            <!DOCTYPE html>
            <html lang="zh-CN">
                <head>
                    <meta charset="UTF-8">
                    <title>
 live555学习笔记－RTSP服务运作 - CSDN博客
</title>

                <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/detail-60a2c245da.min.css">
                <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/themes/skin3-template/skin3-template-88717cedf2.min.css">

                <script type="text/javascript">
                var username = "";
                </script>

                <script src="https://csdnimg.cn/public/common/libs/jquery/jquery-1.9.1.min.js" type="text/javascript"></script>

                <!-- 新版上报 -->
                <!-- 新版上报end -->
                <link rel="stylesheet" href="https://csdnimg.cn/public/sandalstrap/1.3/css/sandalstrap.min.css"> 
                </head>
                <body>    
        
                    <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/blog_code-c3a0c33d5c.css">
                    <div class="container clearfix pt0" id="mainBox">
        <main style="width: 100%;"><div class="blog-content-box">
 <div class="article-title-box" id="article_anchors_515">
  <span class="article-type type-2 float-left">
   转
  </span>
  <h1 class="title-article">
   live555学习笔记－RTSP服务运作
  </h1>
 </div>
 <div class="article-info-box">
  <div class="article-bar-top d-flex">
   <span class="time">
    2013年09月20日 17:13:27
   </span>
   <div ">
    <span class="read-count">
     阅读数：7315
    </span>
   </div>
  </div>
 </div>
 <article>
  <div class="article_content clearfix csdn-tracking-statistics" data-dsm="post" data-mod="popu_307" data-pid="blog" id="article_content">
   <link href="https://csdnimg.cn/release/phoenix/template/css/htmledit_views-0a60691e80.css" rel="stylesheet"/>
   <div class="htmledit_views">
    <span style="font-family:Arial; font-size:14px; color:#333333; line-height:26px">
     RTSP服务运作
    </span>
    <br style="color:rgb(51,51,51); line-height:26px; font-family:Arial; font-size:14px"/>
    <br/>
    <span style="font-family:Arial; font-size:14px; color:#333333; line-height:26px">
     基础基本搞明白了，那么RTSP,RTP等这些协议又是如何利用这些基础机制运作的呢？
    </span>
    <br style="color:rgb(51,51,51); line-height:26px; font-family:Arial; font-size:14px"/>
    <span style="font-family:Arial; font-size:14px; color:#333333; line-height:26px">
     首先来看RTSP.
    </span>
    <br style="color:rgb(51,51,51); line-height:26px; font-family:Arial; font-size:14px"/>
    <br/>
    <span style="font-family:Arial; font-size:14px; color:#333333; line-height:26px">
     RTSP首先需建立TCP侦听socket。可见于此函数：
    </span>
    <br style="color:rgb(51,51,51); line-height:26px; font-family:Arial; font-size:14px"/>
    <div class="dp-highlighter bg_cpp" style="margin:18px 0px!important; width:687.04px; color:rgb(51,51,51); line-height:26px; overflow:auto; padding-top:1px; font-family:Consolas,'Courier New',Courier,mono,serif; background-color:rgb(231,229,220)">
     <div class="bar" style="padding-left:45px">
      <div class="tools" style="padding:3px 8px 10px 10px; color:silver; line-height:normal; font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:9px; border-left-color:rgb(108,226,108); border-left-width:3px; border-left-style:solid; background-color:rgb(248,248,248)">
       <strong>
        [cpp]
       </strong>
       <a class="ViewSource" href="http://blog.csdn.net/niu_gao/article/details/6911130#" rel="nofollow" style="margin:0px 10px 0px 0px; padding:1px; border:currentColor; width:16px; height:16px; color:rgb(160,160,160); text-indent:-2000px; font-size:9px; text-decoration:none; display:inline-block; background-color:inherit" target="_blank" title="view plain">
        view
 plain
       </a>
       <a class="CopyToClipboard" href="http://blog.csdn.net/niu_gao/article/details/6911130#" rel="nofollow" style="margin:0px 10px 0px 0px; padding:1px; border:currentColor; width:16px; height:16px; color:rgb(160,160,160); text-indent:-2000px; font-size:9px; text-decoration:none; display:inline-block; background-color:inherit" target="_blank" title="copy">
        copy
       </a>
       <div style="left:531px; top:625px; width:18px; height:18px; position:absolute; z-index:99">
       </div>
      </div>
     </div>
     <ol class="dp-cpp" start="1" style="margin:0px 0px 1px 45px!important; padding:0px; border:currentColor; color:rgb(92,92,92); background-color:rgb(255,255,255)">
      <li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
         DynamicRTSPServer* DynamicRTSPServer::createNew(UsageEnvironment&amp; env, Port ourPort,
        </span>
       </span>
      </li>
      <li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        UserAuthenticationDatabase* authDatabase,
       </span>
      </li>
      <li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        unsigned reclamationTestSeconds) {
       </span>
      </li>
      <li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        <span class="datatypes" style="color:#2e8b57; margin:0px; padding:0px; border:currentColor; font-weight:bold; background-color:inherit">
         int
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
         ourSocket = setUpOurSocket(env, ourPort);
        </span>
        <span class="comment" style="color:#0820; margin:0px; padding:0px; border:currentColor; background-color:inherit">
         //建立TCP socket
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
        </span>
       </span>
      </li>
      <li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        <span class="keyword" style="color:#06699; margin:0px; padding:0px; border:currentColor; font-weight:bold; background-color:inherit">
         if
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
         (ourSocket == -1)
        </span>
       </span>
      </li>
      <li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        <span class="keyword" style="color:#06699; margin:0px; padding:0px; border:currentColor; font-weight:bold; background-color:inherit">
         return
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
         NULL;
        </span>
       </span>
      </li>
      <li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
       </span>
      </li>
      <li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
       </span>
      </li>
      <li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        <span class="keyword" style="color:#06699; margin:0px; padding:0px; border:currentColor; font-weight:bold; background-color:inherit">
         return
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
        </span>
        <span class="keyword" style="color:#06699; margin:0px; padding:0px; border:currentColor; font-weight:bold; background-color:inherit">
         new
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
         DynamicRTSPServer(env, ourSocket, ourPort, authDatabase,
        </span>
       </span>
      </li>
      <li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        reclamationTestSeconds);
       </span>
      </li>
      <li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        }
       </span>
      </li>
     </ol>
    </div>
    <br style="color:rgb(51,51,51); line-height:26px; font-family:Arial; font-size:14px"/>
    <span style="font-family:Arial; font-size:14px; color:#333333; line-height:26px">
     要帧听客户端的连接，就需要利用任务调度机制了，所以需添加一个socket handler。可见于此函数：
    </span>
    <br style="color:rgb(51,51,51); line-height:26px; font-family:Arial; font-size:14px"/>
    <div class="dp-highlighter bg_cpp" style="margin:18px 0px!important; width:687.04px; color:rgb(51,51,51); line-height:26px; overflow:auto; padding-top:1px; font-family:Consolas,'Courier New',Courier,mono,serif; background-color:rgb(231,229,220)">
     <div class="bar" style="padding-left:45px">
      <div class="tools" style="padding:3px 8px 10px 10px; color:silver; line-height:normal; font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:9px; border-left-color:rgb(108,226,108); border-left-width:3px; border-left-style:solid; background-color:rgb(248,248,248)">
       <strong>
        [cpp]
       </strong>
       <a class="ViewSource" href="http://blog.csdn.net/niu_gao/article/details/6911130#" rel="nofollow" style="margin:0px 10px 0px 0px; padding:1px; border:currentColor; width:16px; height:16px; color:rgb(160,160,160); text-indent:-2000px; font-size:9px; text-decoration:none; display:inline-block; background-color:inherit" target="_blank" title="view plain">
        view
 plain
       </a>
       <a class="CopyToClipboard" href="http://blog.csdn.net/niu_gao/article/details/6911130#" rel="nofollow" style="margin:0px 10px 0px 0px; padding:1px; border:currentColor; width:16px; height:16px; color:rgb(160,160,160); text-indent:-2000px; font-size:9px; text-decoration:none; display:inline-block; background-color:inherit" target="_blank" title="copy">
        copy
       </a>
       <div style="left:531px; top:944px; width:18px; height:18px; position:absolute; z-index:99">
       </div>
      </div>
     </div>
     <ol class="dp-cpp" start="1" style="margin:0px 0px 1px 45px!important; padding:0px; border:currentColor; color:rgb(92,92,92); background-color:rgb(255,255,255)">
      <li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
         RTSPServer::RTSPServer(UsageEnvironment&amp; env,
        </span>
       </span>
      </li>
      <li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        <span class="datatypes" style="color:#2e8b57; margin:0px; padding:0px; border:currentColor; font-weight:bold; background-color:inherit">
         int
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
         ourSocket,
        </span>
       </span>
      </li>
      <li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        Port ourPort,
       </span>
      </li>
      <li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        UserAuthenticationDatabase* authDatabase,
       </span>
      </li>
      <li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        unsigned reclamationTestSeconds) :
       </span>
      </li>
      <li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        Medium(env),
       </span>
      </li>
      <li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        fRTSPServerSocket(ourSocket),
       </span>
      </li>
      <li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        fRTSPServerPort(ourPort),
       </span>
      </li>
      <li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        fHTTPServerSocket(-1),
       </span>
      </li>
      <li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        fHTTPServerPort(0),
       </span>
      </li>
      <li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        fClientSessionsForHTTPTunneling(NULL),
       </span>
      </li>
      <li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        fAuthDB(authDatabase),
       </span>
      </li>
      <li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        fReclamationTestSeconds(reclamationTestSeconds),
       </span>
      </li>
      <li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        fServerMediaSessions(HashTable::create(STRING_HASH_KEYS))
       </span>
      </li>
      <li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        {
       </span>
      </li>
      <li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        <span class="preprocessor" style="color:gray; margin:0px; padding:0px; border:currentColor; background-color:inherit">
         #ifdef USE_SIGNALS
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
        </span>
       </span>
      </li>
      <li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        <span class="comment" style="color:#0820; margin:0px; padding:0px; border:currentColor; background-color:inherit">
         // Ignore the SIGPIPE signal, so that clients on the same host that are killed
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
        </span>
       </span>
      </li>
      <li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        <span class="comment" style="color:#0820; margin:0px; padding:0px; border:currentColor; background-color:inherit">
         // don't also kill us:
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
        </span>
       </span>
      </li>
      <li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        signal(SIGPIPE, SIG_IGN);
       </span>
      </li>
      <li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        <span class="preprocessor" style="color:gray; margin:0px; padding:0px; border:currentColor; background-color:inherit">
         #endif
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
        </span>
       </span>
      </li>
      <li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
       </span>
      </li>
      <li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
       </span>
      </li>
      <li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        <span class="comment" style="color:#0820; margin:0px; padding:0px; border:currentColor; background-color:inherit">
         // Arrange to handle connections from others:
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
        </span>
       </span>
      </li>
      <li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        env.taskScheduler().turnOnBackgroundReadHandling(
       </span>
      </li>
      <li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        fRTSPServerSocket,
       </span>
      </li>
      <li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        (TaskScheduler::BackgroundHandlerProc*) &amp;incomingConnectionHandlerRTSP,
       </span>
      </li>
      <li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        <span class="keyword" style="color:#06699; margin:0px; padding:0px; border:currentColor; font-weight:bold; background-color:inherit">
         this
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
         );
        </span>
       </span>
      </li>
      <li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        }
       </span>
      </li>
     </ol>
    </div>
    <br style="color:rgb(51,51,51); line-height:26px; font-family:Arial; font-size:14px"/>
    <br style="color:rgb(51,51,51); line-height:26px; font-family:Arial; font-size:14px"/>
    <p style="color:rgb(51,51,51); line-height:26px; font-family:Arial; font-size:14px">
     当收到客户的连接时需保存下代表客户端的新socket，以后用这个socket与这个客户通讯。每个客户将来会对应一个rtp会话，而且各客户的RTSP请求只控制自己的rtp会话，那么最好建立一个会话类，代表各客户的rtsp会话。于是类RTSPServer::RTSPClientSession产生，它保存的代表客户的socket。下为RTSPClientSession的创建过程
    </p>
    <p style="color:rgb(51,51,51); line-height:26px; font-family:Arial; font-size:14px">
    </p>
    <div class="dp-highlighter bg_cpp" style="margin:18px 0px!important; width:687.04px; color:rgb(51,51,51); line-height:26px; overflow:auto; padding-top:1px; font-family:Consolas,'Courier New',Courier,mono,serif; background-color:rgb(231,229,220)">
     <div class="bar" style="padding-left:45px">
      <div class="tools" style="padding:3px 8px 10px 10px; color:silver; line-height:normal; font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:9px; border-left-color:rgb(108,226,108); border-left-width:3px; border-left-style:solid; background-color:rgb(248,248,248)">
       <strong>
        [cpp]
       </strong>
       <a class="ViewSource" href="http://blog.csdn.net/niu_gao/article/details/6911130#" rel="nofollow" style="margin:0px 10px 0px 0px; padding:1px; border:currentColor; width:16px; height:16px; color:rgb(160,160,160); text-indent:-2000px; font-size:9px; text-decoration:none; display:inline-block; background-color:inherit" target="_blank" title="view plain">
        view
 plain
       </a>
       <a class="CopyToClipboard" href="http://blog.csdn.net/niu_gao/article/details/6911130#" rel="nofollow" style="margin:0px 10px 0px 0px; padding:1px; border:currentColor; width:16px; height:16px; color:rgb(160,160,160); text-indent:-2000px; font-size:9px; text-decoration:none; display:inline-block; background-color:inherit" target="_blank" title="copy">
        copy
       </a>
       <div style="left:531px; top:1687px; width:18px; height:18px; position:absolute; z-index:99">
       </div>
      </div>
     </div>
     <ol class="dp-cpp" start="1" style="margin:0px 0px 1px 45px!important; padding:0px; border:currentColor; color:rgb(92,92,92); background-color:rgb(255,255,255)">
      <li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        <span class="keyword" style="color:#06699; margin:0px; padding:0px; border:currentColor; font-weight:bold; background-color:inherit">
         void
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
         RTSPServer::incomingConnectionHandler(
        </span>
        <span class="datatypes" style="color:#2e8b57; margin:0px; padding:0px; border:currentColor; font-weight:bold; background-color:inherit">
         int
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
         serverSocket)
        </span>
       </span>
      </li>
      <li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        {
       </span>
      </li>
      <li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        <span class="keyword" style="color:#06699; margin:0px; padding:0px; border:currentColor; font-weight:bold; background-color:inherit">
         struct
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
         sockaddr_in clientAddr;
        </span>
       </span>
      </li>
      <li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        SOCKLEN_T clientAddrLen =
        <span class="keyword" style="color:#06699; margin:0px; padding:0px; border:currentColor; font-weight:bold; background-color:inherit">
         sizeof
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
         clientAddr;
        </span>
       </span>
      </li>
      <li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
       </span>
      </li>
      <li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        <span class="comment" style="color:#0820; margin:0px; padding:0px; border:currentColor; background-color:inherit">
         //接受连接
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
        </span>
       </span>
      </li>
      <li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        <span class="datatypes" style="color:#2e8b57; margin:0px; padding:0px; border:currentColor; font-weight:bold; background-color:inherit">
         int
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
         clientSocket = accept(serverSocket,
        </span>
       </span>
      </li>
      <li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        (
        <span class="keyword" style="color:#06699; margin:0px; padding:0px; border:currentColor; font-weight:bold; background-color:inherit">
         struct
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
         sockaddr*) &amp;clientAddr,
        </span>
       </span>
      </li>
      <li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        &amp;clientAddrLen);
       </span>
      </li>
      <li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
       </span>
      </li>
      <li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        <span class="keyword" style="color:#06699; margin:0px; padding:0px; border:currentColor; font-weight:bold; background-color:inherit">
         if
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
         (clientSocket &lt; 0) {
        </span>
       </span>
      </li>
      <li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        <span class="datatypes" style="color:#2e8b57; margin:0px; padding:0px; border:currentColor; font-weight:bold; background-color:inherit">
         int
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
         err = envir().getErrno();
        </span>
       </span>
      </li>
      <li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        <span class="keyword" style="color:#06699; margin:0px; padding:0px; border:currentColor; font-weight:bold; background-color:inherit">
         if
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
         (err != EWOULDBLOCK) {
        </span>
       </span>
      </li>
      <li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        envir().setResultErrMsg(
        <span class="string" style="color:blue; margin:0px; padding:0px; border:currentColor; background-color:inherit">
         "accept() failed: "
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
         );
        </span>
       </span>
      </li>
      <li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        }
       </span>
      </li>
      <li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        <span class="keyword" style="color:#06699; margin:0px; padding:0px; border:currentColor; font-weight:bold; background-color:inherit">
         return
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
         ;
        </span>
       </span>
      </li>
      <li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        }
       </span>
      </li>
      <li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
       </span>
      </li>
      <li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        <span class="comment" style="color:#0820; margin:0px; padding:0px; border:currentColor; background-color:inherit">
         //设置socket的参数
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
        </span>
       </span>
      </li>
      <li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        makeSocketNonBlocking(clientSocket);
       </span>
      </li>
      <li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        increaseSendBufferTo(envir(), clientSocket, 50 * 1024);
       </span>
      </li>
      <li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
       </span>
      </li>
      <li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        <span class="preprocessor" style="color:gray; margin:0px; padding:0px; border:currentColor; background-color:inherit">
         #ifdef DEBUG
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
        </span>
       </span>
      </li>
      <li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        envir() &lt;&lt;
        <span class="string" style="color:blue; margin:0px; padding:0px; border:currentColor; background-color:inherit">
         "accept()ed connection from "
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
         &lt;&lt; our_inet_ntoa(clientAddr.sin_addr) &lt;&lt;
        </span>
        <span class="string" style="color:blue; margin:0px; padding:0px; border:currentColor; background-color:inherit">
         "\n"
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
         ;
        </span>
       </span>
      </li>
      <li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        <span class="preprocessor" style="color:gray; margin:0px; padding:0px; border:currentColor; background-color:inherit">
         #endif
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
        </span>
       </span>
      </li>
      <li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
       </span>
      </li>
      <li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        <span class="comment" style="color:#0820; margin:0px; padding:0px; border:currentColor; background-color:inherit">
         //产生一个sesson id
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
        </span>
       </span>
      </li>
      <li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
       </span>
      </li>
      <li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        <span class="comment" style="color:#0820; margin:0px; padding:0px; border:currentColor; background-color:inherit">
         // Create a new object for this RTSP session.
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
        </span>
       </span>
      </li>
      <li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        <span class="comment" style="color:#0820; margin:0px; padding:0px; border:currentColor; background-color:inherit">
         // (Choose a random 32-bit integer for the session id (it will be encoded as a 8-digit hex number).  We don't bother checking for
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
        </span>
       </span>
      </li>
      <li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        <span class="comment" style="color:#0820; margin:0px; padding:0px; border:currentColor; background-color:inherit">
         //  a collision; the probability of two concurrent sessions getting the same session id is very low.)
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
        </span>
       </span>
      </li>
      <li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        <span class="comment" style="color:#0820; margin:0px; padding:0px; border:currentColor; background-color:inherit">
         // (We do, however, avoid choosing session id 0, because that has a special use (by "OnDemandServerMediaSubsession").)
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
        </span>
       </span>
      </li>
      <li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        unsigned sessionId;
       </span>
      </li>
      <li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        <span class="keyword" style="color:#06699; margin:0px; padding:0px; border:currentColor; font-weight:bold; background-color:inherit">
         do
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
         {
        </span>
       </span>
      </li>
      <li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        sessionId = (unsigned) our_random();
       </span>
      </li>
      <li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        }
        <span class="keyword" style="color:#06699; margin:0px; padding:0px; border:currentColor; font-weight:bold; background-color:inherit">
         while
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
         (sessionId == 0);
        </span>
       </span>
      </li>
      <li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
       </span>
      </li>
      <li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        <span class="comment" style="color:#0820; margin:0px; padding:0px; border:currentColor; background-color:inherit">
         //创建RTSPClientSession，注意传入的参数
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
        </span>
       </span>
      </li>
      <li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        (
        <span class="keyword" style="color:#06699; margin:0px; padding:0px; border:currentColor; font-weight:bold; background-color:inherit">
         void
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
         ) createNewClientSession(sessionId, clientSocket, clientAddr);
        </span>
       </span>
      </li>
      <li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        }
       </span>
      </li>
     </ol>
    </div>
    <p style="color:rgb(51,51,51); line-height:26px; font-family:Arial; font-size:14px">
    </p>
    <p style="color:rgb(51,51,51); line-height:26px; font-family:Arial; font-size:14px">
     RTSPClientSession要提供什么功能呢？可以想象：需要监听客户端的rtsp请求并回应它，需要在DESCRIBE请求中返回所请求的流的信息，需要在SETUP请求中建立起RTP会话，需要在TEARDOWN请求中关闭RTP会话，等等...
    </p>
    <span style="font-family:Arial; font-size:14px; color:#333333; line-height:26px">
     RTSPClientSession要侦听客户端的请求，就需把自己的socket handler加入计划任务。证据如下：
    </span>
    <br style="color:rgb(51,51,51); line-height:26px; font-family:Arial; font-size:14px"/>
    <div class="dp-highlighter bg_cpp" style="margin:18px 0px!important; width:687.04px; color:rgb(51,51,51); line-height:26px; overflow:auto; padding-top:1px; font-family:Consolas,'Courier New',Courier,mono,serif; background-color:rgb(231,229,220)">
     <div class="bar" style="padding-left:45px">
      <div class="tools" style="padding:3px 8px 10px 10px; color:silver; line-height:normal; font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:9px; border-left-color:rgb(108,226,108); border-left-width:3px; border-left-style:solid; background-color:rgb(248,248,248)">
       <strong>
        [cpp]
       </strong>
       <a class="ViewSource" href="http://blog.csdn.net/niu_gao/article/details/6911130#" rel="nofollow" style="margin:0px 10px 0px 0px; padding:1px; border:currentColor; width:16px; height:16px; color:rgb(160,160,160); text-indent:-2000px; font-size:9px; text-decoration:none; display:inline-block; background-color:inherit" target="_blank" title="view plain">
        view
 plain
       </a>
       <a class="CopyToClipboard" href="http://blog.csdn.net/niu_gao/article/details/6911130#" rel="nofollow" style="margin:0px 10px 0px 0px; padding:1px; border:currentColor; width:16px; height:16px; color:rgb(160,160,160); text-indent:-2000px; font-size:9px; text-decoration:none; display:inline-block; background-color:inherit" target="_blank" title="copy">
        copy
       </a>
       <div style="left:531px; top:2629px; width:18px; height:18px; position:absolute; z-index:99">
       </div>
      </div>
     </div>
     <ol class="dp-cpp" start="1" style="margin:0px 0px 1px 45px!important; padding:0px; border:currentColor; color:rgb(92,92,92); background-color:rgb(255,255,255)">
      <li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
         RTSPServer::RTSPClientSession::RTSPClientSession(
        </span>
       </span>
      </li>
      <li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        RTSPServer&amp; ourServer,
       </span>
      </li>
      <li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        unsigned sessionId,
       </span>
      </li>
      <li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        <span class="datatypes" style="color:#2e8b57; margin:0px; padding:0px; border:currentColor; font-weight:bold; background-color:inherit">
         int
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
         clientSocket,
        </span>
       </span>
      </li>
      <li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        <span class="keyword" style="color:#06699; margin:0px; padding:0px; border:currentColor; font-weight:bold; background-color:inherit">
         struct
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
         sockaddr_in clientAddr) :
        </span>
       </span>
      </li>
      <li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        fOurServer(ourServer),
       </span>
      </li>
      <li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        fOurSessionId(sessionId),
       </span>
      </li>
      <li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        fOurServerMediaSession(NULL),
       </span>
      </li>
      <li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        fClientInputSocket(clientSocket),
       </span>
      </li>
      <li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        fClientOutputSocket(clientSocket),
       </span>
      </li>
      <li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        fClientAddr(clientAddr),
       </span>
      </li>
      <li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        fSessionCookie(NULL),
       </span>
      </li>
      <li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        fLivenessCheckTask(NULL),
       </span>
      </li>
      <li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        fIsMulticast(False),
       </span>
      </li>
      <li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        fSessionIsActive(True),
       </span>
      </li>
      <li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        fStreamAfterSETUP(False),
       </span>
      </li>
      <li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        fTCPStreamIdCount(0),
       </span>
      </li>
      <li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        fNumStreamStates(0),
       </span>
      </li>
      <li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        fStreamStates(NULL),
       </span>
      </li>
      <li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        fRecursionCount(0)
       </span>
      </li>
      <li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        {
       </span>
      </li>
      <li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        <span class="comment" style="color:#0820; margin:0px; padding:0px; border:currentColor; background-color:inherit">
         // Arrange to handle incoming requests:
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
        </span>
       </span>
      </li>
      <li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        resetRequestBuffer();
       </span>
      </li>
      <li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        envir().taskScheduler().turnOnBackgroundReadHandling(fClientInputSocket,
       </span>
      </li>
      <li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        (TaskScheduler::BackgroundHandlerProc*) &amp;incomingRequestHandler,
       </span>
      </li>
      <li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        <span class="keyword" style="color:#06699; margin:0px; padding:0px; border:currentColor; font-weight:bold; background-color:inherit">
         this
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
         );
        </span>
       </span>
      </li>
      <li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        noteLiveness();
       </span>
      </li>
      <li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        }
       </span>
      </li>
     </ol>
    </div>
    <br style="color:rgb(51,51,51); line-height:26px; font-family:Arial; font-size:14px"/>
    <br style="color:rgb(51,51,51); line-height:26px; font-family:Arial; font-size:14px"/>
    <span style="font-family:Arial; font-size:14px; color:#333333; line-height:26px">
     下面重点讲一下下RTSPClientSession响应DESCRIBE请求的过程：
    </span>
    <br style="color:rgb(51,51,51); line-height:26px; font-family:Arial; font-size:14px"/>
    <div class="dp-highlighter bg_cpp" style="margin:18px 0px!important; width:687.04px; color:rgb(51,51,51); line-height:26px; overflow:auto; padding-top:1px; font-family:Consolas,'Courier New',Courier,mono,serif; background-color:rgb(231,229,220)">
     <div class="bar" style="padding-left:45px">
      <div class="tools" style="padding:3px 8px 10px 10px; color:silver; line-height:normal; font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:9px; border-left-color:rgb(108,226,108); border-left-width:3px; border-left-style:solid; background-color:rgb(248,248,248)">
       <strong>
        [cpp]
       </strong>
       <a class="ViewSource" href="http://blog.csdn.net/niu_gao/article/details/6911130#" rel="nofollow" style="margin:0px 10px 0px 0px; padding:1px; border:currentColor; width:16px; height:16px; color:rgb(160,160,160); text-indent:-2000px; font-size:9px; text-decoration:none; display:inline-block; background-color:inherit" target="_blank" title="view plain">
        view
 plain
       </a>
       <a class="CopyToClipboard" href="http://blog.csdn.net/niu_gao/article/details/6911130#" rel="nofollow" style="margin:0px 10px 0px 0px; padding:1px; border:currentColor; width:16px; height:16px; color:rgb(160,160,160); text-indent:-2000px; font-size:9px; text-decoration:none; display:inline-block; background-color:inherit" target="_blank" title="copy">
        copy
       </a>
       <div style="left:531px; top:3280px; width:18px; height:18px; position:absolute; z-index:99">
       </div>
      </div>
     </div>
     <ol class="dp-cpp" start="1" style="margin:0px 0px 1px 45px!important; padding:0px; border:currentColor; color:rgb(92,92,92); background-color:rgb(255,255,255)">
      <li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        <span class="keyword" style="color:#06699; margin:0px; padding:0px; border:currentColor; font-weight:bold; background-color:inherit">
         void
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
         RTSPServer::RTSPClientSession::handleCmd_DESCRIBE(
        </span>
       </span>
      </li>
      <li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        <span class="datatypes" style="color:#2e8b57; margin:0px; padding:0px; border:currentColor; font-weight:bold; background-color:inherit">
         char
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
        </span>
        <span class="keyword" style="color:#06699; margin:0px; padding:0px; border:currentColor; font-weight:bold; background-color:inherit">
         const
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
         * cseq,
        </span>
       </span>
      </li>
      <li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        <span class="datatypes" style="color:#2e8b57; margin:0px; padding:0px; border:currentColor; font-weight:bold; background-color:inherit">
         char
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
        </span>
        <span class="keyword" style="color:#06699; margin:0px; padding:0px; border:currentColor; font-weight:bold; background-color:inherit">
         const
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
         * urlPreSuffix,
        </span>
       </span>
      </li>
      <li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        <span class="datatypes" style="color:#2e8b57; margin:0px; padding:0px; border:currentColor; font-weight:bold; background-color:inherit">
         char
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
        </span>
        <span class="keyword" style="color:#06699; margin:0px; padding:0px; border:currentColor; font-weight:bold; background-color:inherit">
         const
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
         * urlSuffix,
        </span>
       </span>
      </li>
      <li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        <span class="datatypes" style="color:#2e8b57; margin:0px; padding:0px; border:currentColor; font-weight:bold; background-color:inherit">
         char
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
        </span>
        <span class="keyword" style="color:#06699; margin:0px; padding:0px; border:currentColor; font-weight:bold; background-color:inherit">
         const
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
         * fullRequestStr)
        </span>
       </span>
      </li>
      <li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        {
       </span>
      </li>
      <li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        <span class="datatypes" style="color:#2e8b57; margin:0px; padding:0px; border:currentColor; font-weight:bold; background-color:inherit">
         char
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
         * sdpDescription = NULL;
        </span>
       </span>
      </li>
      <li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        <span class="datatypes" style="color:#2e8b57; margin:0px; padding:0px; border:currentColor; font-weight:bold; background-color:inherit">
         char
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
         * rtspURL = NULL;
        </span>
       </span>
      </li>
      <li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        <span class="keyword" style="color:#06699; margin:0px; padding:0px; border:currentColor; font-weight:bold; background-color:inherit">
         do
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
         {
        </span>
       </span>
      </li>
      <li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        <span class="comment" style="color:#0820; margin:0px; padding:0px; border:currentColor; background-color:inherit">
         //整理一下下RTSP地址
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
        </span>
       </span>
      </li>
      <li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        <span class="datatypes" style="color:#2e8b57; margin:0px; padding:0px; border:currentColor; font-weight:bold; background-color:inherit">
         char
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
         urlTotalSuffix[RTSP_PARAM_STRING_MAX];
        </span>
       </span>
      </li>
      <li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        <span class="keyword" style="color:#06699; margin:0px; padding:0px; border:currentColor; font-weight:bold; background-color:inherit">
         if
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
         (strlen(urlPreSuffix) + strlen(urlSuffix) + 2
        </span>
       </span>
      </li>
      <li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        &gt;
        <span class="keyword" style="color:#06699; margin:0px; padding:0px; border:currentColor; font-weight:bold; background-color:inherit">
         sizeof
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
         urlTotalSuffix) {
        </span>
       </span>
      </li>
      <li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        handleCmd_bad(cseq);
       </span>
      </li>
      <li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        <span class="keyword" style="color:#06699; margin:0px; padding:0px; border:currentColor; font-weight:bold; background-color:inherit">
         break
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
         ;
        </span>
       </span>
      </li>
      <li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        }
       </span>
      </li>
      <li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        urlTotalSuffix[0] =
        <span class="string" style="color:blue; margin:0px; padding:0px; border:currentColor; background-color:inherit">
         '\0'
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
         ;
        </span>
       </span>
      </li>
      <li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        <span class="keyword" style="color:#06699; margin:0px; padding:0px; border:currentColor; font-weight:bold; background-color:inherit">
         if
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
         (urlPreSuffix[0] !=
        </span>
        <span class="string" style="color:blue; margin:0px; padding:0px; border:currentColor; background-color:inherit">
         '\0'
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
         ) {
        </span>
       </span>
      </li>
      <li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        strcat(urlTotalSuffix, urlPreSuffix);
       </span>
      </li>
      <li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        strcat(urlTotalSuffix,
        <span class="string" style="color:blue; margin:0px; padding:0px; border:currentColor; background-color:inherit">
         "/"
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
         );
        </span>
       </span>
      </li>
      <li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        }
       </span>
      </li>
      <li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        strcat(urlTotalSuffix, urlSuffix);
       </span>
      </li>
      <li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
       </span>
      </li>
      <li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
       </span>
      </li>
      <li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        <span class="comment" style="color:#0820; margin:0px; padding:0px; border:currentColor; background-color:inherit">
         //验证帐户和密码
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
        </span>
       </span>
      </li>
      <li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        <span class="keyword" style="color:#06699; margin:0px; padding:0px; border:currentColor; font-weight:bold; background-color:inherit">
         if
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
         (!authenticationOK(
        </span>
        <span class="string" style="color:blue; margin:0px; padding:0px; border:currentColor; background-color:inherit">
         "DESCRIBE"
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
         , cseq, urlTotalSuffix, fullRequestStr))
        </span>
       </span>
      </li>
      <li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        <span class="keyword" style="color:#06699; margin:0px; padding:0px; border:currentColor; font-weight:bold; background-color:inherit">
         break
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
         ;
        </span>
       </span>
      </li>
      <li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
       </span>
      </li>
      <li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
       </span>
      </li>
      <li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        <span class="comment" style="color:#0820; margin:0px; padding:0px; border:currentColor; background-color:inherit">
         // We should really check that the request contains an "Accept:" #####
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
        </span>
       </span>
      </li>
      <li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        <span class="comment" style="color:#0820; margin:0px; padding:0px; border:currentColor; background-color:inherit">
         // for "application/sdp", because that's what we're sending back #####
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
        </span>
       </span>
      </li>
      <li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
       </span>
      </li>
      <li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
       </span>
      </li>
      <li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        <span class="comment" style="color:#0820; margin:0px; padding:0px; border:currentColor; background-color:inherit">
         // Begin by looking up the "ServerMediaSession" object for the specified "urlTotalSuffix":
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
        </span>
       </span>
      </li>
      <li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        <span class="comment" style="color:#0820; margin:0px; padding:0px; border:currentColor; background-color:inherit">
         //跟据流的名字查找ServerMediaSession，如果找不到，会创建一个。每个ServerMediaSession中至少要包含一个
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
        </span>
       </span>
      </li>
      <li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        <span class="comment" style="color:#0820; margin:0px; padding:0px; border:currentColor; background-color:inherit">
         //ServerMediaSubsession。一个ServerMediaSession对应一个媒体，可以认为是Server上的一个文件，或一个实时获取设备。其包含的每个ServerMediaSubSession代表媒体中的一个Track。所以一个ServerMediaSession对应一个媒体，如果客户请求的媒体名相同，就使用已存在的ServerMediaSession，如果不同，就创建一个新的。一个流对应一个StreamState，StreamState与ServerMediaSubsession相关，但代表的是动态的，而ServerMediaSubsession代表静态的。
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
        </span>
       </span>
      </li>
      <li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        ServerMediaSession* session = fOurServer.lookupServerMediaSession(urlTotalSuffix);
       </span>
      </li>
      <li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        <span class="keyword" style="color:#06699; margin:0px; padding:0px; border:currentColor; font-weight:bold; background-color:inherit">
         if
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
         (session == NULL) {
        </span>
       </span>
      </li>
      <li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        handleCmd_notFound(cseq);
       </span>
      </li>
      <li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        <span class="keyword" style="color:#06699; margin:0px; padding:0px; border:currentColor; font-weight:bold; background-color:inherit">
         break
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
         ;
        </span>
       </span>
      </li>
      <li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        }
       </span>
      </li>
      <li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
       </span>
      </li>
      <li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
       </span>
      </li>
      <li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        <span class="comment" style="color:#0820; margin:0px; padding:0px; border:currentColor; background-color:inherit">
         // Then, assemble a SDP description for this session:
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
        </span>
       </span>
      </li>
      <li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        <span class="comment" style="color:#0820; margin:0px; padding:0px; border:currentColor; background-color:inherit">
         //获取SDP字符串，在函数内会依次获取每个ServerMediaSubSession的字符串然连接起来。
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
        </span>
       </span>
      </li>
      <li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        sdpDescription = session-&gt;generateSDPDescription();
       </span>
      </li>
      <li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        <span class="keyword" style="color:#06699; margin:0px; padding:0px; border:currentColor; font-weight:bold; background-color:inherit">
         if
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
         (sdpDescription == NULL) {
        </span>
       </span>
      </li>
      <li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        <span class="comment" style="color:#0820; margin:0px; padding:0px; border:currentColor; background-color:inherit">
         // This usually means that a file name that was specified for a
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
        </span>
       </span>
      </li>
      <li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        <span class="comment" style="color:#0820; margin:0px; padding:0px; border:currentColor; background-color:inherit">
         // "ServerMediaSubsession" does not exist.
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
        </span>
       </span>
      </li>
      <li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        snprintf((
        <span class="datatypes" style="color:#2e8b57; margin:0px; padding:0px; border:currentColor; font-weight:bold; background-color:inherit">
         char
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
         *) fResponseBuffer,
        </span>
        <span class="keyword" style="color:#06699; margin:0px; padding:0px; border:currentColor; font-weight:bold; background-color:inherit">
         sizeof
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
         fResponseBuffer,
        </span>
       </span>
      </li>
      <li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        <span class="string" style="color:blue; margin:0px; padding:0px; border:currentColor; background-color:inherit">
         "RTSP/1.0 404 File Not Found, Or In Incorrect Format\r\n"
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
        </span>
       </span>
      </li>
      <li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        <span class="string" style="color:blue; margin:0px; padding:0px; border:currentColor; background-color:inherit">
         "CSeq: %s\r\n"
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
        </span>
       </span>
      </li>
      <li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        <span class="string" style="color:blue; margin:0px; padding:0px; border:currentColor; background-color:inherit">
         "%s\r\n"
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
         , cseq, dateHeader());
        </span>
       </span>
      </li>
      <li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        <span class="keyword" style="color:#06699; margin:0px; padding:0px; border:currentColor; font-weight:bold; background-color:inherit">
         break
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
         ;
        </span>
       </span>
      </li>
      <li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        }
       </span>
      </li>
      <li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        unsigned sdpDescriptionSize = strlen(sdpDescription);
       </span>
      </li>
      <li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
       </span>
      </li>
      <li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
       </span>
      </li>
      <li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        <span class="comment" style="color:#0820; margin:0px; padding:0px; border:currentColor; background-color:inherit">
         // Also, generate our RTSP URL, for the "Content-Base:" header
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
        </span>
       </span>
      </li>
      <li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        <span class="comment" style="color:#0820; margin:0px; padding:0px; border:currentColor; background-color:inherit">
         // (which is necessary to ensure that the correct URL gets used in
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
        </span>
       </span>
      </li>
      <li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        <span class="comment" style="color:#0820; margin:0px; padding:0px; border:currentColor; background-color:inherit">
         // subsequent "SETUP" requests).
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
        </span>
       </span>
      </li>
      <li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        rtspURL = fOurServer.rtspURL(session, fClientInputSocket);
       </span>
      </li>
      <li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
       </span>
      </li>
      <li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
       </span>
      </li>
      <li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        <span class="comment" style="color:#0820; margin:0px; padding:0px; border:currentColor; background-color:inherit">
         //形成响应DESCRIBE请求的RTSP字符串。
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
        </span>
       </span>
      </li>
      <li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        snprintf((
        <span class="datatypes" style="color:#2e8b57; margin:0px; padding:0px; border:currentColor; font-weight:bold; background-color:inherit">
         char
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
         *) fResponseBuffer,
        </span>
        <span class="keyword" style="color:#06699; margin:0px; padding:0px; border:currentColor; font-weight:bold; background-color:inherit">
         sizeof
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
         fResponseBuffer,
        </span>
       </span>
      </li>
      <li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        <span class="string" style="color:blue; margin:0px; padding:0px; border:currentColor; background-color:inherit">
         "RTSP/1.0 200 OK\r\nCSeq: %s\r\n"
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
        </span>
       </span>
      </li>
      <li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        <span class="string" style="color:blue; margin:0px; padding:0px; border:currentColor; background-color:inherit">
         "%s"
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
        </span>
       </span>
      </li>
      <li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        <span class="string" style="color:blue; margin:0px; padding:0px; border:currentColor; background-color:inherit">
         "Content-Base: %s/\r\n"
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
        </span>
       </span>
      </li>
      <li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        <span class="string" style="color:blue; margin:0px; padding:0px; border:currentColor; background-color:inherit">
         "Content-Type: application/sdp\r\n"
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
        </span>
       </span>
      </li>
      <li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        <span class="string" style="color:blue; margin:0px; padding:0px; border:currentColor; background-color:inherit">
         "Content-Length: %d\r\n\r\n"
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
        </span>
       </span>
      </li>
      <li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        <span class="string" style="color:blue; margin:0px; padding:0px; border:currentColor; background-color:inherit">
         "%s"
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
         , cseq, dateHeader(), rtspURL, sdpDescriptionSize,
        </span>
       </span>
      </li>
      <li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        sdpDescription);
       </span>
      </li>
      <li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        }
        <span class="keyword" style="color:#06699; margin:0px; padding:0px; border:currentColor; font-weight:bold; background-color:inherit">
         while
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
         (0);
        </span>
       </span>
      </li>
      <li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
       </span>
      </li>
      <li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
       </span>
      </li>
      <li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        <span class="keyword" style="color:#06699; margin:0px; padding:0px; border:currentColor; font-weight:bold; background-color:inherit">
         delete
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
         [] sdpDescription;
        </span>
       </span>
      </li>
      <li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        <span class="keyword" style="color:#06699; margin:0px; padding:0px; border:currentColor; font-weight:bold; background-color:inherit">
         delete
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
         [] rtspURL;
        </span>
       </span>
      </li>
      <li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
       </span>
      </li>
      <li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
       </span>
      </li>
      <li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        <span class="comment" style="color:#0820; margin:0px; padding:0px; border:currentColor; background-color:inherit">
         //返回后会被立即发送（没有把socket write操作放入计划任务中）。
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
        </span>
       </span>
      </li>
      <li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        }
       </span>
      </li>
     </ol>
    </div>
    <br style="color:rgb(51,51,51); line-height:26px; font-family:Arial; font-size:14px"/>
    <br style="color:rgb(51,51,51); line-height:26px; font-family:Arial; font-size:14px"/>
    <br style="color:rgb(51,51,51); line-height:26px; font-family:Arial; font-size:14px"/>
    <span style="font-family:Arial; font-size:14px; color:#333333; line-height:26px">
     fOurServer.lookupServerMediaSession(urlTotalSuffix)中会在找不到同名ServerMediaSession时新建一个，代表一个RTP流的ServerMediaSession们是被RTSPServer管理的，而不是被RTSPClientSession拥有。为什么呢？因为ServerMediaSession代表的是一个静态的流，也就是可以从它里面获取一个流的各种信息，但不能获取传输状态。不同客户可能连接到同一个流，所以ServerMediaSession应被RTSPServer所拥有。创建一个ServerMediaSession过程值得一观：
    </span>
    <br style="color:rgb(51,51,51); line-height:26px; font-family:Arial; font-size:14px"/>
    <div class="dp-highlighter bg_cpp" style="margin:18px 0px!important; width:687.04px; color:rgb(51,51,51); line-height:26px; overflow:auto; padding-top:1px; font-family:Consolas,'Courier New',Courier,mono,serif; background-color:rgb(231,229,220)">
     <div class="bar" style="padding-left:45px">
      <div class="tools" style="padding:3px 8px 10px 10px; color:silver; line-height:normal; font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:9px; border-left-color:rgb(108,226,108); border-left-width:3px; border-left-style:solid; background-color:rgb(248,248,248)">
       <strong>
        [cpp]
       </strong>
       <a class="ViewSource" href="http://blog.csdn.net/niu_gao/article/details/6911130#" rel="nofollow" style="margin:0px 10px 0px 0px; padding:1px; border:currentColor; width:16px; height:16px; color:rgb(160,160,160); text-indent:-2000px; font-size:9px; text-decoration:none; display:inline-block; background-color:inherit" target="_blank" title="view plain">
        view
 plain
       </a>
       <a class="CopyToClipboard" href="http://blog.csdn.net/niu_gao/article/details/6911130#" rel="nofollow" style="margin:0px 10px 0px 0px; padding:1px; border:currentColor; width:16px; height:16px; color:rgb(160,160,160); text-indent:-2000px; font-size:9px; text-decoration:none; display:inline-block; background-color:inherit" target="_blank" title="copy">
        copy
       </a>
       <div style="left:531px; top:5140px; width:18px; height:18px; position:absolute; z-index:99">
       </div>
      </div>
     </div>
     <ol class="dp-cpp" start="1" style="margin:0px 0px 1px 45px!important; padding:0px; border:currentColor; color:rgb(92,92,92); background-color:rgb(255,255,255)">
      <li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        <span class="keyword" style="color:#06699; margin:0px; padding:0px; border:currentColor; font-weight:bold; background-color:inherit">
         static
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
         ServerMediaSession* createNewSMS(UsageEnvironment&amp; env,
        </span>
        <span class="datatypes" style="color:#2e8b57; margin:0px; padding:0px; border:currentColor; font-weight:bold; background-color:inherit">
         char
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
        </span>
        <span class="keyword" style="color:#06699; margin:0px; padding:0px; border:currentColor; font-weight:bold; background-color:inherit">
         const
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
         * fileName,
        </span>
        <span class="datatypes" style="color:#2e8b57; margin:0px; padding:0px; border:currentColor; font-weight:bold; background-color:inherit">
         FILE
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
         *
        </span>
        <span class="comment" style="color:#0820; margin:0px; padding:0px; border:currentColor; background-color:inherit">
         /*fid*/
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
         )
        </span>
       </span>
      </li>
      <li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        {
       </span>
      </li>
      <li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        <span class="comment" style="color:#0820; margin:0px; padding:0px; border:currentColor; background-color:inherit">
         // Use the file name extension to determine the type of "ServerMediaSession":
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
        </span>
       </span>
      </li>
      <li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        <span class="datatypes" style="color:#2e8b57; margin:0px; padding:0px; border:currentColor; font-weight:bold; background-color:inherit">
         char
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
        </span>
        <span class="keyword" style="color:#06699; margin:0px; padding:0px; border:currentColor; font-weight:bold; background-color:inherit">
         const
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
         * extension = strrchr(fileName,
        </span>
        <span class="string" style="color:blue; margin:0px; padding:0px; border:currentColor; background-color:inherit">
         '.'
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
         );
        </span>
       </span>
      </li>
      <li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        <span class="keyword" style="color:#06699; margin:0px; padding:0px; border:currentColor; font-weight:bold; background-color:inherit">
         if
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
         (extension == NULL)
        </span>
       </span>
      </li>
      <li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        <span class="keyword" style="color:#06699; margin:0px; padding:0px; border:currentColor; font-weight:bold; background-color:inherit">
         return
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
         NULL;
        </span>
       </span>
      </li>
      <li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
       </span>
      </li>
      <li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
       </span>
      </li>
      <li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        ServerMediaSession* sms = NULL;
       </span>
      </li>
      <li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        Boolean
        <span class="keyword" style="color:#06699; margin:0px; padding:0px; border:currentColor; font-weight:bold; background-color:inherit">
         const
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
         reuseSource = False;
        </span>
       </span>
      </li>
      <li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        <span class="keyword" style="color:#06699; margin:0px; padding:0px; border:currentColor; font-weight:bold; background-color:inherit">
         if
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
         (strcmp(extension,
        </span>
        <span class="string" style="color:blue; margin:0px; padding:0px; border:currentColor; background-color:inherit">
         ".aac"
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
         ) == 0) {
        </span>
       </span>
      </li>
      <li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        <span class="comment" style="color:#0820; margin:0px; padding:0px; border:currentColor; background-color:inherit">
         // Assumed to be an AAC Audio (ADTS format) file:
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
        </span>
       </span>
      </li>
      <li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        NEW_SMS(
        <span class="string" style="color:blue; margin:0px; padding:0px; border:currentColor; background-color:inherit">
         "AAC Audio"
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
         );
        </span>
       </span>
      </li>
      <li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        sms-&gt;addSubsession(
       </span>
      </li>
      <li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        ADTSAudioFileServerMediaSubsession::createNew(env, fileName,
       </span>
      </li>
      <li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        reuseSource));
       </span>
      </li>
      <li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        }
        <span class="keyword" style="color:#06699; margin:0px; padding:0px; border:currentColor; font-weight:bold; background-color:inherit">
         else
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
        </span>
        <span class="keyword" style="color:#06699; margin:0px; padding:0px; border:currentColor; font-weight:bold; background-color:inherit">
         if
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
         (strcmp(extension,
        </span>
        <span class="string" style="color:blue; margin:0px; padding:0px; border:currentColor; background-color:inherit">
         ".amr"
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
         ) == 0) {
        </span>
       </span>
      </li>
      <li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        <span class="comment" style="color:#0820; margin:0px; padding:0px; border:currentColor; background-color:inherit">
         // Assumed to be an AMR Audio file:
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
        </span>
       </span>
      </li>
      <li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        NEW_SMS(
        <span class="string" style="color:blue; margin:0px; padding:0px; border:currentColor; background-color:inherit">
         "AMR Audio"
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
         );
        </span>
       </span>
      </li>
      <li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        sms-&gt;addSubsession(
       </span>
      </li>
      <li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        AMRAudioFileServerMediaSubsession::createNew(env, fileName,
       </span>
      </li>
      <li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        reuseSource));
       </span>
      </li>
      <li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        }
        <span class="keyword" style="color:#06699; margin:0px; padding:0px; border:currentColor; font-weight:bold; background-color:inherit">
         else
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
        </span>
        <span class="keyword" style="color:#06699; margin:0px; padding:0px; border:currentColor; font-weight:bold; background-color:inherit">
         if
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
         (strcmp(extension,
        </span>
        <span class="string" style="color:blue; margin:0px; padding:0px; border:currentColor; background-color:inherit">
         ".ac3"
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
         ) == 0) {
        </span>
       </span>
      </li>
      <li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        <span class="comment" style="color:#0820; margin:0px; padding:0px; border:currentColor; background-color:inherit">
         // Assumed to be an AC-3 Audio file:
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
        </span>
       </span>
      </li>
      <li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        NEW_SMS(
        <span class="string" style="color:blue; margin:0px; padding:0px; border:currentColor; background-color:inherit">
         "AC-3 Audio"
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
         );
        </span>
       </span>
      </li>
      <li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        sms-&gt;addSubsession(
       </span>
      </li>
      <li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        AC3AudioFileServerMediaSubsession::createNew(env, fileName,
       </span>
      </li>
      <li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        reuseSource));
       </span>
      </li>
      <li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        }
        <span class="keyword" style="color:#06699; margin:0px; padding:0px; border:currentColor; font-weight:bold; background-color:inherit">
         else
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
        </span>
        <span class="keyword" style="color:#06699; margin:0px; padding:0px; border:currentColor; font-weight:bold; background-color:inherit">
         if
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
         (strcmp(extension,
        </span>
        <span class="string" style="color:blue; margin:0px; padding:0px; border:currentColor; background-color:inherit">
         ".m4e"
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
         ) == 0) {
        </span>
       </span>
      </li>
      <li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        <span class="comment" style="color:#0820; margin:0px; padding:0px; border:currentColor; background-color:inherit">
         // Assumed to be a MPEG-4 Video Elementary Stream file:
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
        </span>
       </span>
      </li>
      <li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        NEW_SMS(
        <span class="string" style="color:blue; margin:0px; padding:0px; border:currentColor; background-color:inherit">
         "MPEG-4 Video"
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
         );
        </span>
       </span>
      </li>
      <li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        sms-&gt;addSubsession(
       </span>
      </li>
      <li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        MPEG4VideoFileServerMediaSubsession::createNew(env, fileName,
       </span>
      </li>
      <li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        reuseSource));
       </span>
      </li>
      <li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        }
        <span class="keyword" style="color:#06699; margin:0px; padding:0px; border:currentColor; font-weight:bold; background-color:inherit">
         else
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
        </span>
        <span class="keyword" style="color:#06699; margin:0px; padding:0px; border:currentColor; font-weight:bold; background-color:inherit">
         if
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
         (strcmp(extension,
        </span>
        <span class="string" style="color:blue; margin:0px; padding:0px; border:currentColor; background-color:inherit">
         ".264"
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
         ) == 0) {
        </span>
       </span>
      </li>
      <li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        <span class="comment" style="color:#0820; margin:0px; padding:0px; border:currentColor; background-color:inherit">
         // Assumed to be a H.264 Video Elementary Stream file:
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
        </span>
       </span>
      </li>
      <li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        NEW_SMS(
        <span class="string" style="color:blue; margin:0px; padding:0px; border:currentColor; background-color:inherit">
         "H.264 Video"
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
         );
        </span>
       </span>
      </li>
      <li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        OutPacketBuffer::maxSize = 100000;
        <span class="comment" style="color:#0820; margin:0px; padding:0px; border:currentColor; background-color:inherit">
         // allow for some possibly large H.264 frames
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
        </span>
       </span>
      </li>
      <li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        sms-&gt;addSubsession(
       </span>
      </li>
      <li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        H264VideoFileServerMediaSubsession::createNew(env, fileName,
       </span>
      </li>
      <li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        reuseSource));
       </span>
      </li>
      <li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        }
        <span class="keyword" style="color:#06699; margin:0px; padding:0px; border:currentColor; font-weight:bold; background-color:inherit">
         else
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
        </span>
        <span class="keyword" style="color:#06699; margin:0px; padding:0px; border:currentColor; font-weight:bold; background-color:inherit">
         if
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
         (strcmp(extension,
        </span>
        <span class="string" style="color:blue; margin:0px; padding:0px; border:currentColor; background-color:inherit">
         ".mp3"
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
         ) == 0) {
        </span>
       </span>
      </li>
      <li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        <span class="comment" style="color:#0820; margin:0px; padding:0px; border:currentColor; background-color:inherit">
         // Assumed to be a MPEG-1 or 2 Audio file:
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
        </span>
       </span>
      </li>
      <li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        NEW_SMS(
        <span class="string" style="color:blue; margin:0px; padding:0px; border:currentColor; background-color:inherit">
         "MPEG-1 or 2 Audio"
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
         );
        </span>
       </span>
      </li>
      <li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        <span class="comment" style="color:#0820; margin:0px; padding:0px; border:currentColor; background-color:inherit">
         // To stream using 'ADUs' rather than raw MP3 frames, uncomment the following:
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
        </span>
       </span>
      </li>
      <li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        <span class="comment" style="color:#0820; margin:0px; padding:0px; border:currentColor; background-color:inherit">
         //#define STREAM_USING_ADUS 1
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
        </span>
       </span>
      </li>
      <li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        <span class="comment" style="color:#0820; margin:0px; padding:0px; border:currentColor; background-color:inherit">
         // To also reorder ADUs before streaming, uncomment the following:
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
        </span>
       </span>
      </li>
      <li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        <span class="comment" style="color:#0820; margin:0px; padding:0px; border:currentColor; background-color:inherit">
         //#define INTERLEAVE_ADUS 1
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
        </span>
       </span>
      </li>
      <li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        <span class="comment" style="color:#0820; margin:0px; padding:0px; border:currentColor; background-color:inherit">
         // (For more information about ADUs and interleaving,
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
        </span>
       </span>
      </li>
      <li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        <span class="comment" style="color:#0820; margin:0px; padding:0px; border:currentColor; background-color:inherit">
         //  see &lt;http://www.live555.com/rtp-mp3/&gt;)
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
        </span>
       </span>
      </li>
      <li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        Boolean useADUs = False;
       </span>
      </li>
      <li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        Interleaving* interleaving = NULL;
       </span>
      </li>
      <li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        <span class="preprocessor" style="color:gray; margin:0px; padding:0px; border:currentColor; background-color:inherit">
         #ifdef STREAM_USING_ADUS
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
        </span>
       </span>
      </li>
      <li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        useADUs = True;
       </span>
      </li>
      <li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        <span class="preprocessor" style="color:gray; margin:0px; padding:0px; border:currentColor; background-color:inherit">
         #ifdef INTERLEAVE_ADUS
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
        </span>
       </span>
      </li>
      <li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        unsigned
        <span class="datatypes" style="color:#2e8b57; margin:0px; padding:0px; border:currentColor; font-weight:bold; background-color:inherit">
         char
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
         interleaveCycle[] = {0,2,1,3};
        </span>
        <span class="comment" style="color:#0820; margin:0px; padding:0px; border:currentColor; background-color:inherit">
         // or choose your own...
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
        </span>
       </span>
      </li>
      <li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        unsigned
        <span class="keyword" style="color:#06699; margin:0px; padding:0px; border:currentColor; font-weight:bold; background-color:inherit">
         const
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
         interleaveCycleSize
        </span>
       </span>
      </li>
      <li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        = (
        <span class="keyword" style="color:#06699; margin:0px; padding:0px; border:currentColor; font-weight:bold; background-color:inherit">
         sizeof
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
         interleaveCycle)/(
        </span>
        <span class="keyword" style="color:#06699; margin:0px; padding:0px; border:currentColor; font-weight:bold; background-color:inherit">
         sizeof
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
         (unsigned
        </span>
        <span class="datatypes" style="color:#2e8b57; margin:0px; padding:0px; border:currentColor; font-weight:bold; background-color:inherit">
         char
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
         ));
        </span>
       </span>
      </li>
      <li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        interleaving =
        <span class="keyword" style="color:#06699; margin:0px; padding:0px; border:currentColor; font-weight:bold; background-color:inherit">
         new
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
         Interleaving(interleaveCycleSize, interleaveCycle);
        </span>
       </span>
      </li>
      <li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        <span class="preprocessor" style="color:gray; margin:0px; padding:0px; border:currentColor; background-color:inherit">
         #endif
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
        </span>
       </span>
      </li>
      <li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        <span class="preprocessor" style="color:gray; margin:0px; padding:0px; border:currentColor; background-color:inherit">
         #endif
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
        </span>
       </span>
      </li>
      <li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        sms-&gt;addSubsession(
       </span>
      </li>
      <li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        MP3AudioFileServerMediaSubsession::createNew(env, fileName,
       </span>
      </li>
      <li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        reuseSource, useADUs, interleaving));
       </span>
      </li>
      <li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        }
        <span class="keyword" style="color:#06699; margin:0px; padding:0px; border:currentColor; font-weight:bold; background-color:inherit">
         else
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
        </span>
        <span class="keyword" style="color:#06699; margin:0px; padding:0px; border:currentColor; font-weight:bold; background-color:inherit">
         if
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
         (strcmp(extension,
        </span>
        <span class="string" style="color:blue; margin:0px; padding:0px; border:currentColor; background-color:inherit">
         ".mpg"
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
         ) == 0) {
        </span>
       </span>
      </li>
      <li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        <span class="comment" style="color:#0820; margin:0px; padding:0px; border:currentColor; background-color:inherit">
         // Assumed to be a MPEG-1 or 2 Program Stream (audio+video) file:
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
        </span>
       </span>
      </li>
      <li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        NEW_SMS(
        <span class="string" style="color:blue; margin:0px; padding:0px; border:currentColor; background-color:inherit">
         "MPEG-1 or 2 Program Stream"
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
         );
        </span>
       </span>
      </li>
      <li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        MPEG1or2FileServerDemux* demux = MPEG1or2FileServerDemux::createNew(env,
       </span>
      </li>
      <li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        fileName, reuseSource);
       </span>
      </li>
      <li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        sms-&gt;addSubsession(demux-&gt;newVideoServerMediaSubsession());
       </span>
      </li>
      <li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        sms-&gt;addSubsession(demux-&gt;newAudioServerMediaSubsession());
       </span>
      </li>
      <li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        }
        <span class="keyword" style="color:#06699; margin:0px; padding:0px; border:currentColor; font-weight:bold; background-color:inherit">
         else
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
        </span>
        <span class="keyword" style="color:#06699; margin:0px; padding:0px; border:currentColor; font-weight:bold; background-color:inherit">
         if
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
         (strcmp(extension,
        </span>
        <span class="string" style="color:blue; margin:0px; padding:0px; border:currentColor; background-color:inherit">
         ".ts"
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
         ) == 0) {
        </span>
       </span>
      </li>
      <li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        <span class="comment" style="color:#0820; margin:0px; padding:0px; border:currentColor; background-color:inherit">
         // Assumed to be a MPEG Transport Stream file:
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
        </span>
       </span>
      </li>
      <li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        <span class="comment" style="color:#0820; margin:0px; padding:0px; border:currentColor; background-color:inherit">
         // Use an index file name that's the same as the TS file name, except with ".tsx":
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
        </span>
       </span>
      </li>
      <li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        unsigned indexFileNameLen = strlen(fileName) + 2;
        <span class="comment" style="color:#0820; margin:0px; padding:0px; border:currentColor; background-color:inherit">
         // allow for trailing "x\0"
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
        </span>
       </span>
      </li>
      <li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        <span class="datatypes" style="color:#2e8b57; margin:0px; padding:0px; border:currentColor; font-weight:bold; background-color:inherit">
         char
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
         * indexFileName =
        </span>
        <span class="keyword" style="color:#06699; margin:0px; padding:0px; border:currentColor; font-weight:bold; background-color:inherit">
         new
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
        </span>
        <span class="datatypes" style="color:#2e8b57; margin:0px; padding:0px; border:currentColor; font-weight:bold; background-color:inherit">
         char
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
         [indexFileNameLen];
        </span>
       </span>
      </li>
      <li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        sprintf(indexFileName,
        <span class="string" style="color:blue; margin:0px; padding:0px; border:currentColor; background-color:inherit">
         "%sx"
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
         , fileName);
        </span>
       </span>
      </li>
      <li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        NEW_SMS(
        <span class="string" style="color:blue; margin:0px; padding:0px; border:currentColor; background-color:inherit">
         "MPEG Transport Stream"
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
         );
        </span>
       </span>
      </li>
      <li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        sms-&gt;addSubsession(
       </span>
      </li>
      <li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        MPEG2TransportFileServerMediaSubsession::createNew(env,
       </span>
      </li>
      <li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        fileName, indexFileName, reuseSource));
       </span>
      </li>
      <li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        <span class="keyword" style="color:#06699; margin:0px; padding:0px; border:currentColor; font-weight:bold; background-color:inherit">
         delete
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
         [] indexFileName;
        </span>
       </span>
      </li>
      <li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        }
        <span class="keyword" style="color:#06699; margin:0px; padding:0px; border:currentColor; font-weight:bold; background-color:inherit">
         else
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
        </span>
        <span class="keyword" style="color:#06699; margin:0px; padding:0px; border:currentColor; font-weight:bold; background-color:inherit">
         if
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
         (strcmp(extension,
        </span>
        <span class="string" style="color:blue; margin:0px; padding:0px; border:currentColor; background-color:inherit">
         ".wav"
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
         ) == 0) {
        </span>
       </span>
      </li>
      <li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        <span class="comment" style="color:#0820; margin:0px; padding:0px; border:currentColor; background-color:inherit">
         // Assumed to be a WAV Audio file:
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
        </span>
       </span>
      </li>
      <li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        NEW_SMS(
        <span class="string" style="color:blue; margin:0px; padding:0px; border:currentColor; background-color:inherit">
         "WAV Audio Stream"
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
         );
        </span>
       </span>
      </li>
      <li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        <span class="comment" style="color:#0820; margin:0px; padding:0px; border:currentColor; background-color:inherit">
         // To convert 16-bit PCM data to 8-bit u-law, prior to streaming,
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
        </span>
       </span>
      </li>
      <li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        <span class="comment" style="color:#0820; margin:0px; padding:0px; border:currentColor; background-color:inherit">
         // change the following to True:
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
        </span>
       </span>
      </li>
      <li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        Boolean convertToULaw = False;
       </span>
      </li>
      <li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        sms-&gt;addSubsession(
       </span>
      </li>
      <li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        WAVAudioFileServerMediaSubsession::createNew(env, fileName,
       </span>
      </li>
      <li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        reuseSource, convertToULaw));
       </span>
      </li>
      <li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        }
        <span class="keyword" style="color:#06699; margin:0px; padding:0px; border:currentColor; font-weight:bold; background-color:inherit">
         else
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
        </span>
        <span class="keyword" style="color:#06699; margin:0px; padding:0px; border:currentColor; font-weight:bold; background-color:inherit">
         if
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
         (strcmp(extension,
        </span>
        <span class="string" style="color:blue; margin:0px; padding:0px; border:currentColor; background-color:inherit">
         ".dv"
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
         ) == 0) {
        </span>
       </span>
      </li>
      <li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        <span class="comment" style="color:#0820; margin:0px; padding:0px; border:currentColor; background-color:inherit">
         // Assumed to be a DV Video file
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
        </span>
       </span>
      </li>
      <li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        <span class="comment" style="color:#0820; margin:0px; padding:0px; border:currentColor; background-color:inherit">
         // First, make sure that the RTPSinks' buffers will be large enough to handle the huge size of DV frames (as big as 288000).
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
        </span>
       </span>
      </li>
      <li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        OutPacketBuffer::maxSize = 300000;
       </span>
      </li>
      <li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
       </span>
      </li>
      <li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
       </span>
      </li>
      <li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        NEW_SMS(
        <span class="string" style="color:blue; margin:0px; padding:0px; border:currentColor; background-color:inherit">
         "DV Video"
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
         );
        </span>
       </span>
      </li>
      <li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        sms-&gt;addSubsession(
       </span>
      </li>
      <li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        DVVideoFileServerMediaSubsession::createNew(env, fileName,
       </span>
      </li>
      <li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        reuseSource));
       </span>
      </li>
      <li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        }
        <span class="keyword" style="color:#06699; margin:0px; padding:0px; border:currentColor; font-weight:bold; background-color:inherit">
         else
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
        </span>
        <span class="keyword" style="color:#06699; margin:0px; padding:0px; border:currentColor; font-weight:bold; background-color:inherit">
         if
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
         (strcmp(extension,
        </span>
        <span class="string" style="color:blue; margin:0px; padding:0px; border:currentColor; background-color:inherit">
         ".mkv"
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
         ) == 0) {
        </span>
       </span>
      </li>
      <li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        <span class="comment" style="color:#0820; margin:0px; padding:0px; border:currentColor; background-color:inherit">
         // Assumed to be a Matroska file
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
        </span>
       </span>
      </li>
      <li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        NEW_SMS(
        <span class="string" style="color:blue; margin:0px; padding:0px; border:currentColor; background-color:inherit">
         "Matroska video+audio+(optional)subtitles"
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
         );
        </span>
       </span>
      </li>
      <li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
       </span>
      </li>
      <li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
       </span>
      </li>
      <li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        <span class="comment" style="color:#0820; margin:0px; padding:0px; border:currentColor; background-color:inherit">
         // Create a Matroska file server demultiplexor for the specified file.  (We enter the event loop to wait for this to complete.)
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
        </span>
       </span>
      </li>
      <li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        newMatroskaDemuxWatchVariable = 0;
       </span>
      </li>
      <li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        MatroskaFileServerDemux::createNew(env, fileName,
       </span>
      </li>
      <li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        onMatroskaDemuxCreation, NULL);
       </span>
      </li>
      <li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        env.taskScheduler().doEventLoop(&amp;newMatroskaDemuxWatchVariable);
       </span>
      </li>
      <li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
       </span>
      </li>
      <li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
       </span>
      </li>
      <li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        ServerMediaSubsession* smss;
       </span>
      </li>
      <li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        <span class="keyword" style="color:#06699; margin:0px; padding:0px; border:currentColor; font-weight:bold; background-color:inherit">
         while
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
         ((smss = demux-&gt;newServerMediaSubsession()) != NULL) {
        </span>
       </span>
      </li>
      <li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        sms-&gt;addSubsession(smss);
       </span>
      </li>
      <li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        }
       </span>
      </li>
      <li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        }
       </span>
      </li>
      <li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
       </span>
      </li>
      <li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
       </span>
      </li>
      <li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        <span class="keyword" style="color:#06699; margin:0px; padding:0px; border:currentColor; font-weight:bold; background-color:inherit">
         return
        </span>
        <span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">
         sms;
        </span>
       </span>
      </li>
      <li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
       <span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">
        }
       </span>
      </li>
     </ol>
    </div>
    <br style="color:rgb(51,51,51); line-height:26px; font-family:Arial; font-size:14px"/>
    <p>
     <span style="font-family:Arial; font-size:14px; color:#333333; line-height:26px">
      可以看到NEW_SMS("AMR Audio")会创建新的ServerMediaSession，之后马上调用sms-&gt;addSubsession（）为这个ServerMediaSession添加一个 ServerMediaSubSession 。看起来ServerMediaSession应该可以添加多个ServerMediaSubSession，但这里并没有这样做。如果可以添加多个
 ServerMediaSubsession 那么ServerMediaSession与流名字所指定与文件是没有关系的，也就是说它不会操作文件，而文件的操作是放在 ServerMediaSubsession中的。具体应改是在ServerMediaSubsession的sdpLines()函数中打开。
     </span>
    </p>
    <p>
     <span style="font-family:Arial; font-size:14px; color:#333333; line-height:26px">
      <br/>
     </span>
    </p>
    <p>
     <span style="font-family:Arial; color:#333333">
      <span style="font-size:14px; line-height:26px">
       原文地址：
       <a href="http://blog.csdn.net/niu_gao/article/details/6911130" rel="nofollow" target="_blank">
        http://blog.csdn.net/niu_gao/article/details/6911130
       </a>
      </span>
     </span>
    </p>
    <p>
     <span style="font-family:Arial; color:#333333">
      <span style="font-family:Arial; font-size:14px; color:#333333; line-height:26px">
       live555源代码（VC6）：
      </span>
      <a href="http://download.csdn.net/detail/leixiaohua1020/6374387" rel="nofollow" style="color:rgb(51,102,153); line-height:26px; font-family:Arial; font-size:14px; text-decoration:none" target="_blank">
       http://download.csdn.net/detail/leixiaohua1020/6374387
      </a>
      <br/>
     </span>
    </p>
   </div>
  </div>
  <div style="display:none;" class="hide-article-box text-center csdn-tracking-statistics tracking-click" data-mod="popu_376">
   <a class="btn btn-red-hollow" id="btn-readmore">
    阅读更多
   </a>
  </div>
 </article>
 <div class="article-bar-bottom">
  <div class="tags-box artic-tag-box">
   <span class="label">
    文章标签：
   </span>
   <a class="tag-link" href="http://so.csdn.net/so/search/s.do?q=live555&amp;t=blog" target="_blank">
    live555
   </a>
   <a class="tag-link" href="http://so.csdn.net/so/search/s.do?q=rtsp&amp;t=blog" target="_blank">
    rtsp
   </a>
   <a class="tag-link" href="http://so.csdn.net/so/search/s.do?q=源代码&amp;t=blog" target="_blank">
    源代码
   </a>
  </div>
  <div class="tags-box">
   <span class="label">
    个人分类：
   </span>
   <a class="tag-link" href="https://blog.csdn.net/leixiaohua1020/article/category/1362936" target="_blank">
    Live555
   </a>
  </div>
  <div class="tags-box">
   <span class="label">
    所属专栏：
   </span>
   <a class="tag-link" href="https://blog.csdn.net/column/details/osmedia.html" target="_blank">
    开源多媒体项目源代码分析
   </a>
  </div>
 </div>
 <!-- !empty($pre_next_article[0]) -->
</div>
<div class="recommend-box">
                            <div style="background: #fff; border: dashed 1px #666; padding-left: 1em; padding-top: 1em; padding-bottom: 1em;">
                                <span style="font-size: 0.8em; font-weight: bold;">
                                    此PDF由<a style="color:#0000ff" href="http://www.github.com/spygg"  target="_blank">spygg</a>生成,请尊重原作者版权!!!
                                    <br/>
                                    我的邮箱:liushidc@163.com
                                </span>
                                </div> 
                        </div>
                    </main>
      
                </div>

            <script>
                var recommendCount = 0;
                var articleTit = "";
                var articleId = "";
                var commentscount = 0;

                //1禁止评论，2正常
                var commentAuth = 1;
                //百度搜索
                var baiduKey = "";
                var needInsertBaidu = "";
            </script>
            <script src="https://csdnimg.cn/release/phoenix/template/js/detail-effe72036e.min.js"></script>
            </body>
        </html>