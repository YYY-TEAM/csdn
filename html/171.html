
            <!DOCTYPE html>
            <html lang="zh-CN">
                <head>
                    <meta charset="UTF-8">
                    <title>
 ffplay播放器移植VC的工程：ffplay for MFC - CSDN博客
</title>

                <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/detail-60a2c245da.min.css">
                <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/themes/skin3-template/skin3-template-88717cedf2.min.css">

                <script type="text/javascript">
                var username = "";
                </script>

                <script src="https://csdnimg.cn/public/common/libs/jquery/jquery-1.9.1.min.js" type="text/javascript"></script>

                <!-- 新版上报 -->
                <!-- 新版上报end -->
                <link rel="stylesheet" href="https://csdnimg.cn/public/sandalstrap/1.3/css/sandalstrap.min.css"> 
                </head>
                <body>    
        
                    <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/blog_code-c3a0c33d5c.css">
                    <div class="container clearfix pt0" id="mainBox">
        <main style="width: 100%;"><div class="blog-content-box">
 <div class="article-title-box" id="article_anchors_171">
  <span class="article-type type-1 float-left">
   原
  </span>
  <h1 class="title-article">
   ffplay播放器移植VC的工程：ffplay for MFC
  </h1>
 </div>
 <div class="article-info-box">
  <div class="article-bar-top d-flex">
   <span class="time">
    2014年06月06日 00:07:59
   </span>
   <div ">
    <span class="read-count">
     阅读数：28228
    </span>
   </div>
  </div>
 </div>
 <article>
  <div class="article_content clearfix csdn-tracking-statistics" data-dsm="post" data-mod="popu_307" data-pid="blog" id="article_content">
   <link href="https://csdnimg.cn/release/phoenix/template/css/htmledit_views-0a60691e80.css" rel="stylesheet"/>
   <div class="htmledit_views">
    <p align="center" style="text-align:left;">
     本文介绍一个自己做的FFPLAY移植到VC下的开源工程：ffplayfor MFC。本工程将ffmpeg项目中的ffplay播放器（ffplay.c）移植到了VC的环境下。并且使用MFC做了一套简单的界面。它可以完成一个播放器播放视频的基本流程：解协议，解封装，视频/音频解码，视音频同步，视音频输出。此外还包含一些控制功能：播放，暂停/继续，前进，后退，停止，逐帧播放，全屏等；以及一些简单的视频码流分析功能：视频解码分析和音频解码分析。通过本程序可以学习视频播放器原理，以及SDL和Windows消息机制。
    </p>
    <p style="text-align:center;">
     <img alt="" src="https://img-blog.csdn.net/20140605211334250?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbGVpeGlhb2h1YTEwMjA=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center"/>
     <br/>
    </p>
    <p>
     平台：VC2010
    </p>
    <p>
     类库：FFmpeg，MFC
    </p>
    <p>
     <br/>
     <strong>
      项目主页
     </strong>
    </p>
    <p>
     SourceForge：
     <a href="https://sourceforge.net/projects/ffplayformfc/">
      https://sourceforge.net/projects/ffplayformfc/
     </a>
    </p>
    <p>
     Github：
     <a href="https://github.com/leixiaohua1020/ffplaymfc">
      https://github.com/leixiaohua1020/ffplaymfc
     </a>
    </p>
    <p>
     开源中国：
     <a href="http://git.oschina.net/leixiaohua1020/ffplay-for-MFC">
      http://git.oschina.net/leixiaohua1020/ffplay-for-MFC
     </a>
     <br/>
    </p>
    <p>
     <br/>
    </p>
    <p>
     <strong>
      CSDN项目下载
     </strong>
    </p>
    <p>
     ffplay for MFC 1.0.0(stable)——本版本采用FFmpeg的2012年的类库，稳定
    </p>
    <p>
     <a href="http://download.csdn.net/detail/leixiaohua1020/7452437">
      http://download.csdn.net/detail/leixiaohua1020/7452437
     </a>
     <br/>
    </p>
    <p>
     ffplay for MFC 1.0.1——本版本采用FFmpeg的2014年5月的类库，支持HEVC和VP9，Debug下稳定，Release下目前还有问题。
    </p>
    <p>
     <a href="http://download.csdn.net/detail/leixiaohua1020/7452493">
      http://download.csdn.net/detail/leixiaohua1020/7452493
     </a>
     <br/>
    </p>
    <p>
     注：Release下的问题已经得到网友建议并且解决。解决方法如下：
    </p>
    <p>
     VC工程属性里，linker-&gt;Optimization-&gt;References 选项，改成No(/OPT:NOREF)。
     <br/>
    </p>
    <p>
     <br/>
    </p>
    <p>
     注：以上两个项目由于失误，少了一个SDL.dll文件，去SDL官网
    </p>
    <p>
     <a href="http://www.libsdl.org/download-1.2.php">
      http://www.libsdl.org/download-1.2.php
     </a>
     <br/>
    </p>
    <p>
     下载一个Runtime Libraries即可
    </p>
    <p>
     <br/>
    </p>
    <p>
     补充：
    </p>
    <p>
     该项目原代码简介可以参考：
     <a href="http://blog.csdn.net/leixiaohua1020/article/details/33450345">
      ffplay for mfc 代码备忘
     </a>
     <br/>
     <br/>
    </p>
    <p>
     更新记录==============================
    </p>
    <p>
     1.1版（2014.7.10）
     <br/>
     * 更换了部分界面
    </p>
    <p>
     * 原工程支持Unicode编码
    </p>
    <p>
     * 修复了Release下的Bug
     <br/>
    </p>
    <p>
     * 添加了两个宏定义"INT64_MIN INT64_MAX"，在没有安装 Win7SDK的情况下，可能会出现找不到定义的情况。
     <br/>
    </p>
    <p>
    </p>
    <p>
     CSDN上又上传了一份：
     <a href="http://download.csdn.net/detail/leixiaohua1020/7764509">
      http://download.csdn.net/detail/leixiaohua1020/7764509
     </a>
    </p>
    PUDN上也传了一份：
    <a href="http://www.pudn.com/downloads644/sourcecode/multimedia/detail2605167.html">
     http://www.pudn.com/downloads644/sourcecode/multimedia/detail2605167.html
    </a>
    <br/>
    <p>
     <br/>
    </p>
    <h2>
     一. 主界面
    </h2>
    <p>
     程序的主界面如图所示。最上方是输入的URL。中间是视频的参数列表。下方是视频的控制按钮。
    </p>
    <p style="text-align:center;">
     <img alt="" src="https://img-blog.csdn.net/20140605211530343?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbGVpeGlhb2h1YTEwMjA=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast"/>
     <br/>
    </p>
    <h3>
     1.1输入URL
    </h3>
    <p>
     输入URL框用于输入视频的URL。视频源可以是本地视频或者是网络流。单击输入框右侧的“文件”按钮可以方便地选择本地的文件并获取他们的URL（在这里是路径信息）。此外，也可以将本地视频文件直接拖拽到对话框中，也可以获取到该视频的URL。
    </p>
    <p>
    </p>
    <h3>
     1.2参数列表
    </h3>
    <p>
     <strong>
      封装格式参数
     </strong>
    </p>
    <p>
     输入类型：输入视音频采用的传输协议。举例：RTP，FILE（文件），HTTP，RTMP。
    </p>
    <p>
     封装格式：视音频采用的封装格式。举例：AVI，FLV，MKV，RMVB。
    </p>
    <p>
     比特率：视音频的码率。举例1Mbps。
    </p>
    <p>
     时长：视音频的时间长度。
    </p>
    <p>
     MetaData：视音频元数据信息。
    </p>
    <p>
     <strong>
      视频参数
     </strong>
    </p>
    <p>
     输出像素格式：解码后像素数据格式。举例：YUV420P，RGB24，UYVY。
    </p>
    <p>
     编码方式：视频采用的压缩编码标准。举例：H.264，MPEG2。
    </p>
    <p>
     帧率：每秒钟视频画面数。举例：25fps。
    </p>
    <p>
     画面大小：画面的分辨率。举例：1920x1080，720x576。
    </p>
    <p>
     解码分析：以列表的形式显示每个视频帧的详细信息。
    </p>
    <p>
     <strong>
      音频参数
     </strong>
    </p>
    <p>
     采样率：每秒钟采样点个数。举例：44.1kHz，48kHz。
    </p>
    <p>
     编码方式：音频采用的压缩编码标准。举例：AAC，MP3，WMA。
    </p>
    <p>
     声道数：声道数量。
    </p>
    <p>
     解码分析：以列表的形式显示每个音频帧的详细信息。
    </p>
    <p>
    </p>
    <h3>
     1.3控制按钮
    </h3>
    <p>
     控制按钮包含了：开始，后退，暂停/继续，前进，停止，逐帧播放，全屏。
    </p>
    <p>
     此外，这一排控制按钮的上方，包含了视频播放的进度条。可以通过拖动进度条控制视频的播放。
     <br/>
    </p>
    <h2>
     <strong>
      二. 视频播放窗口
     </strong>
    </h2>
    <p>
     视频播放采用SDL显示。
    </p>
    <p style="text-align:center;">
     <img alt="" src="https://img-blog.csdn.net/20140605211953984?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbGVpeGlhb2h1YTEwMjA=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast"/>
     <br/>
    </p>
    <p align="center">
    </p>
    <h2>
     <strong>
      三. 视频解码分析窗口
     </strong>
    </h2>
    <p>
     视频解码分析窗口列表显示了每一个视频帧的一些信息：序号，帧类型，关键帧，码流序号，PTS。其中不同的帧类型使用不同的背景色标识出来：I帧使用红色，P帧使用蓝色，B帧使用绿色。如图所示。
    </p>
    <p style="text-align:center;">
     <img alt="" src="https://img-blog.csdn.net/20140605212012843?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbGVpeGlhb2h1YTEwMjA=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast"/>
     <br/>
    </p>
    <p align="center">
    </p>
    <h2>
     <strong>
      四. 音频解码分析窗口
     </strong>
    </h2>
    <p>
     音频解码分析窗口列表显示了每个音频帧的一些信息：序号，大小，PTS等。如图所示。
    </p>
    <p align="center">
     <img alt="" src="https://img-blog.csdn.net/20140605212026750?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbGVpeGlhb2h1YTEwMjA=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast"/>
     <br/>
    </p>
    <h2>
     <strong>
      五. 系统支持信息窗口
     </strong>
    </h2>
    <p>
     系统支持信息窗口列表显示了系统的支持信息。包括系统支持的：协议，封装格式，视频解码器，音频解码器，以及其他解码器（字幕解码器）。例如协议列表如图所示，从中可以看出本程序支持的协议类型包含http，file，mms，rtp等等。
    </p>
    <p style="text-align:center;">
     <img alt="" src="https://img-blog.csdn.net/20140605212050218?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbGVpeGlhb2h1YTEwMjA=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast"/>
     <br/>
    </p>
    <p>
     例如从封装格式列表中，可以看出系统支持flv等封装格式。每个列表包含了序号，简称，全称，扩展名，私有数据大小等信息。
    </p>
    <p style="text-align:center;">
     <img alt="" src="https://img-blog.csdn.net/20140605212106906?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbGVpeGlhb2h1YTEwMjA=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast"/>
     <br/>
    </p>
    <p align="center">
    </p>
    <h2>
     <strong>
      六. 菜单
     </strong>
    </h2>
    <p>
     程序上端的菜单中包含了更丰富的选项。一共分成6部分的功能：
     <strong>
      文件，播放控制，播放窗口，视图，语言，帮助
     </strong>
     。下面分别介绍。
    </p>
    <p>
     <strong>
      文件
     </strong>
     ：文件的打开。
    </p>
    <p>
     <strong>
      播放控制
     </strong>
     ：视频播放过程中的控制功能。包含：播放，暂停/继续，停止，逐帧播放，全屏。此外包含了多种快进快退操作：快进10秒，1分，10分；快退10秒，1分，10分。
    </p>
    <p style="text-align:center;">
     <img alt="" src="https://img-blog.csdn.net/20140605212124343?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbGVpeGlhb2h1YTEwMjA=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast"/>
    </p>
    <p align="center">
    </p>
    <p>
     <strong>
      播放窗口
     </strong>
     ：与播放窗口有关的各种选项。可以设置播放窗口显示的内容，以及窗口的大小，纵横比。播放窗口默认是显示视频画面。此外还可以图形化的显示音频的信息，包括音频的波形图，以及音频的RDFT变换图。
    </p>
    <p style="text-align:center;">
     <img alt="" src="https://img-blog.csdn.net/20140605212139953?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbGVpeGlhb2h1YTEwMjA=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast"/>
     <br/>
    </p>
    <p align="center">
    </p>
    <p>
     音频波形图显示效果如图所示：
    </p>
    <p style="text-align:center;">
     <img alt="" src="https://img-blog.csdn.net/20140605212248125?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbGVpeGlhb2h1YTEwMjA=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast"/>
     <br/>
    </p>
    <p>
     音频的RDFT变换图显示效果如图所示：
    </p>
    <p style="text-align:center;">
     <img alt="" src="https://img-blog.csdn.net/20140605212257562?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbGVpeGlhb2h1YTEwMjA=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast"/>
     <br/>
    </p>
    <p>
     <strong>
      视图
     </strong>
     ：包含程序中的几个窗口。包含视频解码分析窗口，音频解码分析窗口，系统支持信息窗口。
    </p>
    <p>
     <strong>
      语言
     </strong>
     ：包含程序支持的几种语言。
    </p>
    <p>
     <strong>
      帮助
     </strong>
     ：包含程序的支持信息。
    </p>
    <p>
    </p>
    <h2>
     七. 英文界面
    </h2>
    <p>
     系统的英文界面如图所示。以后有机会可以增加其他语言。
    </p>
    <p>
     主界面
    </p>
    <p align="center">
     <img alt="" src="https://img-blog.csdn.net/20140605212317625?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbGVpeGlhb2h1YTEwMjA=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast"/>
     <br/>
    </p>
    <p>
     视频解码分析窗口
    </p>
    <p align="center">
     <img alt="" src="https://img-blog.csdn.net/20140605212337390?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbGVpeGlhb2h1YTEwMjA=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast"/>
    </p>
    <p>
     音频解码分析窗口
    </p>
    <p align="center">
     <img alt="" src="https://img-blog.csdn.net/20140605212348281?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbGVpeGlhb2h1YTEwMjA=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast"/>
    </p>
    <p>
     系统支持信息窗口
    </p>
    <p style="text-align:center;">
     <img alt="" src="https://img-blog.csdn.net/20140605212401750?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbGVpeGlhb2h1YTEwMjA=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast"/>
     <br/>
    </p>
    <p align="center">
    </p>
    <div>
     <strong>
      项目主页
     </strong>
     <br/>
     SourceForge：https://sourceforge.net/projects/ffplayformfc/
     <br/>
     Github：https://github.com/leixiaohua1020/ffplaymfc
     <br/>
     开源中国：http://git.oschina.net/leixiaohua1020/ffplay-for-MFC
    </div>
   </div>
  </div>
  <div style="display:none;" class="hide-article-box text-center csdn-tracking-statistics tracking-click" data-mod="popu_376">
   <a class="btn btn-red-hollow" id="btn-readmore">
    阅读更多
   </a>
  </div>
 </article>
 <div class="article-bar-bottom">
  <div class="article-copyright">
   版权声明：本文为博主原创文章，未经博主允许不得转载。			https://blog.csdn.net/leixiaohua1020/article/details/28685327
  </div>
  <div class="tags-box artic-tag-box">
   <span class="label">
    文章标签：
   </span>
   <a class="tag-link" href="http://so.csdn.net/so/search/s.do?q=ffplay&amp;t=blog" target="_blank">
    ffplay
   </a>
   <a class="tag-link" href="http://so.csdn.net/so/search/s.do?q=ffmpeg&amp;t=blog" target="_blank">
    ffmpeg
   </a>
   <a class="tag-link" href="http://so.csdn.net/so/search/s.do?q=mfc&amp;t=blog" target="_blank">
    mfc
   </a>
   <a class="tag-link" href="http://so.csdn.net/so/search/s.do?q=播放器&amp;t=blog" target="_blank">
    播放器
   </a>
   <a class="tag-link" href="http://so.csdn.net/so/search/s.do?q=VC&amp;t=blog" target="_blank">
    VC
   </a>
  </div>
  <div class="tags-box">
   <span class="label">
    个人分类：
   </span>
   <a class="tag-link" href="https://blog.csdn.net/leixiaohua1020/article/category/1843731" target="_blank">
    我的开源项目
   </a>
   <a class="tag-link" href="https://blog.csdn.net/leixiaohua1020/article/category/1360795" target="_blank">
    FFMPEG
   </a>
  </div>
  <div class="tags-box">
   <span class="label">
    所属专栏：
   </span>
   <a class="tag-link" href="https://blog.csdn.net/column/details/ffmpeg-devel.html" target="_blank">
    FFmpeg
   </a>
  </div>
 </div>
 <!-- !empty($pre_next_article[0]) -->
</div>
<div class="recommend-box">
                            <div style="background: #fff; border: dashed 1px #666; padding-left: 1em; padding-top: 1em; padding-bottom: 1em;">
                                <span style="font-size: 0.8em; font-weight: bold;">
                                    此PDF由<a style="color:#0000ff" href="http://www.github.com/spygg"  target="_blank">spygg</a>生成,请尊重原作者版权!!!
                                    <br/>
                                    我的邮箱:liushidc@163.com
                                </span>
                                </div> 
                        </div>
                    </main>
      
                </div>

            <script>
                var recommendCount = 0;
                var articleTit = "";
                var articleId = "";
                var commentscount = 0;

                //1禁止评论，2正常
                var commentAuth = 1;
                //百度搜索
                var baiduKey = "";
                var needInsertBaidu = "";
            </script>
            <script src="https://csdnimg.cn/release/phoenix/template/js/detail-effe72036e.min.js"></script>
            </body>
        </html>